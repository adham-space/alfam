(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69f4fb06"],{2553:function(e,t,r){},"2f81":function(e,t,r){"use strict";r("3b75")},"333d":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[r("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];r("a9e3");Math.easeInOutQuad=function(e,t,r,a){return e/=a/2,e<1?r/2*e*e+t:(e--,-r/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function c(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,r){var a=c(),n=e-a,l=20,u=0;t="undefined"===typeof t?500:t;var s=function e(){u+=l;var c=Math.easeInOutQuad(u,a,n,t);i(c),u<t?o(e):r&&"function"===typeof r&&r()};s()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},s=u,p=(r("f8bf"),r("2877")),d=Object(p["a"])(s,a,n,!1,null,"76f1a239",null);t["a"]=d.exports},3733:function(e,t,r){},"3b75":function(e,t,r){},"53d3":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{staticClass:"orders-body",attrs:{gutter:10}},[r("Tools"),r(e.currentTable,{tag:"current"})],1)],1)},n=[],o=r("5530"),i=r("2f62"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-col",{staticClass:"orders-page-tools",attrs:{span:24}},[r("div",{staticStyle:{display:"flex"}},[r("el-input",{staticStyle:{border:"1px solid transparent"},attrs:{placeholder:"Қидириш"},model:{value:e.search_input,callback:function(t){e.search_input=t},expression:"search_input"}},[r("el-select",{style:1==e.search_type||2==e.search_type?{width:"5.5rem"}:{width:"10rem"},attrs:{slot:"prepend",placeholder:"Select"},on:{change:e.searchTypeChanged},slot:"prepend",model:{value:e.search_type,callback:function(t){e.search_type=t},expression:"search_type"}},[r("el-option",{attrs:{label:"ID",value:1}}),r("el-option",{attrs:{label:"Name",value:2}}),r("el-option",{attrs:{label:"Registred date",value:3}}),r("el-option",{attrs:{label:"Shopping times",value:4}}),r("el-option",{attrs:{label:"Shopping amount",value:5}})],1)],1),r("el-button",{staticStyle:{border:"1px solid transparent","margin-left":"0.5rem"},attrs:{icon:"el-icon-search"}})],1),e.currentOrderHeader.order_name?r("div",{staticClass:"current-order",staticStyle:{flex:"1",margin:"0 1em","text-align":"right"}},[r("el-button",{staticClass:"el-icon-back",staticStyle:{border:"1px solid transparent","background-color":"white","font-size":"1.2em"},on:{click:function(t){return e.backToInventar()}}}),r("span",{staticStyle:{color:"gray"}},[e._v(e._s(e.currentOrderHeader.order_name))]),e._v(" / "),r("span",{staticStyle:{color:"gray"}},[e._v(e._s(e.currentOrderHeader.product))]),e._v(" / "),r("span",{staticStyle:{color:"gray"}},[e._v(e._s(e.currentOrderHeader.customer))])],1):e._e(),r("div",{staticStyle:{display:"flex"}},[r("el-button",{staticStyle:{border:"1px solid transparent"},attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.$router.push("/shop/shop-packing-list")}}}),"innerTable"===e.currentTable?r("el-button",{staticStyle:{border:"1px solid transparent"},attrs:{disabled:!e.currentOrder,icon:"el-icon-edit"},on:{click:function(t){e.editDialog=!0}}}):e._e(),r("edit",{attrs:{"dialog-visible":e.editDialog},on:{closeDialog:function(t){e.editDialog=!1}}})],1)])},l=[],u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"Edit order",visible:e.dialogVisible,"custom-class":"customDialog",align:"center",fullscreen:"","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t},open:e.dialogOpened}},[r("editBody",{ref:"editBodyRef"},[r("span",{staticClass:"dialog-footer",staticStyle:{"margin-top":"1rem"}},[r("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("Cancel")]),r("el-button",{attrs:{loading:e.saving,type:"primary"},on:{click:function(t){return e.save()}}},[e._v("Save")])],1)])],1)},s=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticStyle:{height:"calc(100vh - 96px)"}},[r("el-col",{staticStyle:{height:"calc(100vh - 96px)"},attrs:{span:19}},[r("Table",{ref:"packingListTableRef_edit",attrs:{broken:e.broken},on:{calculateTotalPrice:e.calculateTotalPrice}})],1),r("el-col",{staticStyle:{height:"calc(100vh - 86px)"},attrs:{span:5}},[r("Tools",{ref:"calculatorRef",attrs:{"total-price":e.totalPrice},on:{totalPriceChanged:e.totalPriceChanged,brokenState:e.changedBrokenState}},[e._t("default")],2)],1)],1)},d=[],_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"tblContainer1",staticStyle:{height:"calc(100vh - 86px)"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{"max-height":e.bodyHeight+"",size:"small",data:e.tableDataComputed,"show-summary":"","summary-method":e.jamiSumma}},[r("el-table-column",{attrs:{width:"150",label:"КАФЕЛНИ КОДИ",prop:"code",fixed:"left",align:"center"}}),r("el-table-column",{attrs:{width:"150",label:"СПЕЦИФИКАЦИЯСИ",prop:"type_name",align:"center"}}),r("el-table-column",{attrs:{width:"150",label:"ТОВАРНИ РАЗМЕРИ",prop:"size",align:"center"}}),r("el-table-column",{attrs:{width:"150",label:"ТОВАРНИ РАСМИ",prop:"photo",align:"center"}},[r("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:"https://images.unsplash.com/photo-1612831661153-4914a5ff7851?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2125&q=80",fit:"scale-down"},on:{click:function(t){return e.openImg("https://images.unsplash.com/photo-1612831661153-4914a5ff7851?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2125&q=80")}}})],1),r("el-table-column",{attrs:{width:"300",label:"УМУМИЙ МИҚДОРНИ ЎЛЧОВ БИРЛИГИ",align:"center"}},[r("el-table-column",{attrs:{width:"150",label:"УМУМИЙ (м2)",align:"center",prop:"packTotalArea"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"small",type:"number",value:t.row.packTotalArea},on:{input:function(r){return e.areaIsChanging(r,t.row)}}})]}}])}),r("el-table-column",{attrs:{width:"150",label:"УМУМИЙ (ДОНАСИ)",prop:"item_num",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"two-fields"},[r("el-input",{attrs:{size:"small",value:t.row.item_num},on:{input:function(r){return e.item_numIsChanging(r,t.row)}}})],1)]}}])})],1),r("el-table-column",{attrs:{width:"155",align:"center"}},[r("template",{slot:"header"},[r("span",[e._v("ТОВАРНИ УМУМИЙ")]),r("br"),r("span",[e._v("ПОЧКАСИНИЙ")]),r("br"),r("span",[e._v("(МИҚДОРИ)")]),r("br")]),r("el-table-column",{attrs:{width:"178",align:"center",prop:"pack_num"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"two-fields"},[r("div",{staticClass:"two-fields"},[r("el-input",{attrs:{size:"small",value:t.row.pack_num},on:{input:function(r){return e.pack_numIsChanging(r,t.row)}}})],1),r("div",{staticClass:"two-fields"},[r("el-input",{attrs:{size:"small",value:t.row.over_pack_num},on:{input:function(r){return e.over_pack_numIsChanging(r,t.row)}}})],1)])]}}])},[r("template",{slot:"header"},[r("span",[e._v("ТОВАРНИ УМУМИЙ")]),r("br"),r("span",[e._v("ДОНАСИНИ")]),r("br"),r("span",[e._v("(МИҚДОРИ)")]),r("br")])],2)],2),r("el-table-column",{attrs:{width:"100",prop:"base_price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticStyle:{"margin-right":"1em"},attrs:{effect:"dark",content:t.row.price_by?"Price by item number":"Price by area (m2)",placement:"left"}},[r("el-switch",{attrs:{value:t.row.price_by,"active-color":"#13ce66","inactive-color":""},on:{change:function(r){return e.calcPriceprice_byChanged(r,t.row)}}})],1)]}}])},[r("template",{slot:"header"},[r("span",[e._v("ТАН НАРХИ")]),r("br"),r("span",[e._v("m2 / Dona")])])],2),r("el-table-column",{attrs:{width:"120",label:"ТАН НАРХИ",prop:"base_price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.base_price))])]}}])}),r("el-table-column",{attrs:{width:"130",prop:"sum_kassa",align:"center"}},[r("template",{slot:"header"},[r("span",[e._v("СУММАСИ")]),r("br"),r("span",[e._v("КАССА")])])],2),r("el-table-column",{attrs:{width:"130",prop:"base_price_changed",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"small",type:"number",value:t.row.base_price_changed},on:{input:function(r){return e.base_priceIsChanging(r,t.row)}}})]}}])},[r("template",{slot:"header"},[r("span",[e._v("ЎЗГАРГАН")]),r("br"),r("span",[e._v("ТАН НАРХИ")])])],2),r("el-table-column",{attrs:{width:"130",label:"СУММАСИ",prop:"sum",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.sum.toFixed(2))+" ")]}}])}),r("el-table-column",{attrs:{width:"150",label:"ТОВАРНИ УМУМИЙ КИЛОГРАММИ",prop:"weight",align:"center"}}),r("el-table-column",{attrs:{label:"1-ТА ПОЧКАДИГИ КОЛИЧЕСТВАНИ ЎЛЧОВ БИРЛИГИ",align:"center"}},[r("el-table-column",{attrs:{width:"160",label:"ПОЧКАСИДИГИ (м2)",align:"center",prop:"area_of_one_packet"}}),r("el-table-column",{attrs:{width:"140",label:"1-ДОНАСИНИ (м2)",prop:"area_of_an_item",align:"center"}}),r("el-table-column",{attrs:{align:"center",prop:"number_of_items",width:"140",label:"УМУМИЙ ДОНАСИ"}}),r("el-table-column",{attrs:{width:"160",label:"ПОЧКАСИДИГИ (КГ)",align:"center",prop:"wight_of_one_packet"}}),r("el-table-column",{attrs:{width:"140",label:"1-ДОНАСИНИ  (КГ)",align:"center",prop:"weight_of_an_item"}})],1)],1),r("el-dialog",{attrs:{title:"",visible:e.showImageDilog,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.showImageDilog=t}}},[r("el-image",{staticStyle:{width:"100%",height:"90%"},attrs:{src:e.imageUrl,fit:"scale-down"}})],1)],1)},m=[],h=(r("d3b7"),r("159b"),r("d81d"),r("a9e3"),r("b680"),r("4de4"),{props:{broken:{type:Boolean,default:!1}},data:function(){return{showImageDilog:!1,imageUrl:"",maxHeight:600,newArea:"",currentNotification:null,currentProduct:{},brokenPropotionArr:[],totalPrice:0,tableData:[{propotion:53.33,code:"1191A",type_name:"Ochi",size:"30 * 90",base_price:2,base_price_changed:14,sum:189,sum_kassa:27,price_by:!1,broken:!1,packTotalArea:13.5,item_num:50,pack_num:8,over_pack_num:2,wight_of_one_packet:28,weight_of_an_item:4.6,weight:229.99,area_of_one_packet:1.62,area_of_an_item:.27,number_of_items:6},{propotion:26.67,code:"1191D",type_name:"Decor",size:"30 * 90",broken:!1,base_price:4,base_price_changed:14,sum_kassa:8.64,sum:30.24,price_by:!1,packTotalArea:2.16,item_num:8,pack_num:1,over_pack_num:2,wight_of_one_packet:28,weight_of_an_item:4.6,weight:36.79,area_of_one_packet:1.62,area_of_an_item:.27,number_of_items:6},{propotion:53.33,broken:!0,code:"1191BR",type_name:"Ochi (Singan)",size:"30 * 90",base_price:2,base_price_changed:2,sum:0,sum_kassa:0,price_by:!1,packTotalArea:0,item_num:0,pack_num:0,over_pack_num:0,wight_of_one_packet:28,weight_of_an_item:4.6,weight:0,area_of_one_packet:1.62,area_of_an_item:.27,number_of_items:6},{propotion:20,code:"1191C",type_name:"Pol",size:"30 * 30",base_price:6,base_price_changed:6,sum_kassa:0,sum:0,packTotalArea:0,item_num:0,pack_num:0,broken:!1,price_by:!1,over_pack_num:0,wight_of_one_packet:25,weight_of_an_item:2.28,weight:0,area_of_one_packet:.99,area_of_an_item:.09,number_of_items:11}],tableData1:[{propotion:49,code:"1191A",type_name:"Ochi",size:"30 * 60",base_price:3e3,sum:0,packTotalArea:"",item_num:"",pack_num:"",over_pack_num:"",wight_of_one_packet:25,weight_of_an_item:3.125,weight:"",area_of_one_packet:1.44,area_of_an_item:.18,number_of_items:8},{propotion:25.2,code:"1191B",type_name:"To'qi",size:"30 * 60",packTotalArea:"",base_price:1200,item_num:"",pack_num:"",sum:0,over_pack_num:"",wight_of_one_packet:25,weight_of_an_item:3.125,weight:"",area_of_one_packet:1.44,area_of_an_item:.18,number_of_items:8},{propotion:5.3,code:"1191C",type_name:"Dekor",size:"30 * 60",packTotalArea:"",item_num:"",base_price:304,sum:0,pack_num:"",over_pack_num:"",wight_of_one_packet:25,weight_of_an_item:3.125,weight:"",area_of_one_packet:1.44,area_of_an_item:.18,number_of_items:8},{propotion:14.85,code:"1191D",type_name:"Pol",size:"30 * 30",packTotalArea:"",item_num:"",pack_num:"",over_pack_num:"",base_price:2e3,sum:0,wight_of_one_packet:21,weight_of_an_item:1.4,weight:"",area_of_one_packet:1.35,area_of_an_item:.09,number_of_items:15},{propotion:1.65,code:"1191F",type_name:"Friz",size:"30 * 6",packTotalArea:"",item_num:"",pack_num:"",base_price:300,sum:0,over_pack_num:"",wight_of_one_packet:21,weight_of_an_item:1.4,weight:"",area_of_one_packet:.72,area_of_an_item:.018,number_of_items:40},{propotion:1.1,code:"1191S",type_name:"Sigara",size:"30 * 2",packTotalArea:"",item_num:"",base_price:3401,pack_num:"",sum:0,over_pack_num:"",wight_of_one_packet:10,weight_of_an_item:.1,weight:"",area_of_one_packet:.6,area_of_an_item:.006,number_of_items:100},{propotion:2.76,code:"1191P",type_name:"Plintus",size:"30 * 10",packTotalArea:"",item_num:"",base_price:3401,pack_num:"",sum:0,over_pack_num:"",wight_of_one_packet:20,weight_of_an_item:.1,weight:"",area_of_one_packet:18.6,area_of_an_item:.03,number_of_items:620}]}},computed:{tableDataComputed:function(){var e=this;return this.broken?this.tableData:this.tableData.filter((function(t){return t.broken===e.broken}))}}}),f=r("2909"),b=(r("7db0"),r("b65f"),r("b0c0"),r("99af"),{methods:{areaIsChanging:function(e,t){if(this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),e){e=parseFloat(e),this.currentProduct.packTotalArea=this.truncateToDecimals(e,4);var r=this.truncateToDecimals(e/this.currentProduct.area_of_an_item,4),a=this.truncateToDecimals(parseFloat(r-parseInt(r)),4);r=Math.ceil(r),a<=1e-4&&e?(this.currentProduct.item_num=r,this.currentProduct.pack_num=parseInt(r/this.currentProduct.number_of_items),this.currentProduct.over_pack_num=parseInt(r%this.currentProduct.number_of_items),this.currentProduct.sum=parseInt(this.currentProduct.base_price*e),this.currentProduct.weight=this.truncateToDecimals(this.currentProduct.item_num*this.currentProduct.weight_of_an_item,2),this.calcPrice(),this.calculateTotalPrice(),this.checkPropotion()):0===e?(this.currentProduct.item_num=0,this.currentProduct.pack_num=0,this.currentProduct.over_pack_num=0,this.currentProduct.sum=0,this.calculateTotalPrice(),this.currentProduct.weight=0):(this.currentProduct.item_num="",this.currentProduct.pack_num="",this.currentProduct.over_pack_num="",this.currentProduct.sum=0,this.calculateTotalPrice(),this.currentProduct.weight="")}else this.currentProduct.packTotalArea=e},item_numIsChanging:function(e,t){this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),e?(this.currentProduct.item_num=parseInt(e),this.currentProduct.packTotalArea=this.truncateToDecimals(parseFloat(this.currentProduct.item_num*this.currentProduct.area_of_an_item),4),this.currentProduct.pack_num=parseInt(this.currentProduct.item_num/this.currentProduct.number_of_items),this.currentProduct.over_pack_num=parseInt(this.currentProduct.item_num%this.currentProduct.number_of_items),this.calcPrice(),this.currentProduct.weight=(this.currentProduct.item_num*this.currentProduct.weight_of_an_item).toFixed(2),this.checkPropotion(),this.calculateTotalPrice()):(this.currentProduct.over_pack_num="",this.currentProduct.item_num="",this.currentProduct.pack_num="",this.currentProduct.packTotalArea="",this.currentProduct.sum=0,this.calculateTotalPrice(),this.currentProduct.weight="")},pack_numIsChanging:function(e,t){this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),e?(this.currentProduct.pack_num=parseInt(e),this.currentProduct.item_num=parseInt(this.currentProduct.pack_num*this.currentProduct.number_of_items+this.currentProduct.over_pack_num),this.currentProduct.over_pack_num=""===this.currentProduct.over_pack_num?0:this.currentProduct.over_pack_num,this.currentProduct.packTotalArea=parseFloat((this.currentProduct.item_num*this.currentProduct.area_of_an_item).toFixed(4)),this.calcPrice(),this.currentProduct.weight=(this.currentProduct.item_num*this.currentProduct.weight_of_an_item).toFixed(2),this.checkPropotion(),this.calculateTotalPrice()):(this.currentProduct.pack_num=e,this.currentProduct.item_num="",this.currentProduct.item_num="",this.currentProduct.packTotalArea="",this.currentProduct.sum=0,this.calculateTotalPrice(),this.currentProduct.weight="")},over_pack_numIsChanging:function(e,t){this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),e?(this.currentProduct.over_pack_num=parseInt(e)>this.currentProduct.number_of_items?this.currentProduct.number_of_items:parseInt(e),this.currentProduct.item_num=parseInt(this.currentProduct.pack_num*this.currentProduct.number_of_items+this.currentProduct.over_pack_num),this.currentProduct.packTotalArea=parseFloat((this.currentProduct.item_num*this.currentProduct.area_of_an_item).toFixed(4)),this.currentProduct.weight=(this.currentProduct.item_num*this.currentProduct.weight_of_an_item).toFixed(2),this.calcPrice(),this.checkPropotion(),this.calculateTotalPrice()):(this.currentProduct.over_pack_num=e,this.currentProduct.item_num="",this.currentProduct.packTotalArea="",this.currentProduct.sum=0,this.calculateTotalPrice(),this.currentProduct.weight="")},base_priceIsChanging:function(e,t){this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),e?(this.currentProduct.base_price_changed=parseFloat(e),this.currentProduct.sum=parseFloat((this.currentProduct.base_price_changed*this.currentProduct.packTotalArea).toFixed(4)),this.calculateTotalPrice()):(this.currentProduct.base_price_changed=e,this.currentProduct.sum=0)},calculatebase_prices:function(e){if(e){e=""===e?0:parseFloat(e+"");var t=this.tableDataComputed.reduce((function(e,t){return e+(""===t.sum?0:parseFloat(t.sum))}),0),r=[];this.tableDataComputed.forEach((function(e){r.push(e.sum/t)}));for(var a=0;a<r.length;a++){var n=this.tableDataComputed[a];n.sum=e*r[a],n.price_by&&n.item_num?n.base_price_changed=n.sum/n.item_num:!n.price_by&&n.packTotalArea?n.base_price_changed=parseFloat((n.sum/n.packTotalArea).toFixed(4)):0!==n.price_by&&0!==n.packTotalArea&&this.$notify({message:"Number of item is unknown! or Area is unknown!",type:"error",duration:2300})}}},calcPrice:function(){var e=""===this.currentProduct.item_num?0:parseFloat(this.currentProduct.item_num),t=""===this.currentProduct.packTotalArea?0:parseFloat(this.currentProduct.packTotalArea);this.currentProduct.sum=this.currentProduct.base_price_changed*(this.currentProduct.price_by?e:t),this.currentProduct.sum_kassa=this.currentProduct.base_price*(this.currentProduct.price_by?e:t)},calcPriceprice_byChanged:function(e,t){this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),this.currentProduct.price_by=e,this.calcPrice(),this.calculateTotalPrice()},truncateToDecimals:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=Math.pow(10,t);return Math.trunc(e*r)/r},calculateTotalPrice:function(){this.$emit("calculateTotalPrice",this.truncateToDecimals(this.tableDataComputed.reduce((function(e,t){return e+(""===t.sum?0:parseFloat(t.sum))}),0),2))},checkPropotion:function(){var e=this,t=this.tableDataComputed.reduce((function(e,t){return e+(""===t.packTotalArea?0:parseFloat(t.packTotalArea))}),0),r={name:"",bad_percentage:0,good_percentage:0};this.brokenPropotionArr=[],this.tableDataComputed.forEach((function(a){r.name=a.type_name,r.good_percentage=a.propotion,r.bad_percentage=0===t?0:e.truncateToDecimals(""===a.packTotalArea?0:parseFloat(a.packTotalArea)/t*100),e.brokenPropotionArr.push(r),r={name:"",bad_percentage:0,good_percentage:0}}));var a=this.$createElement;this.currentNotification&&this.currentNotification.close(),this.currentNotification=this.$notify({type:"error",title:"Proportion error",dangerouslyUseHTMLString:!0,message:a("table",{class:"notificationTable"},[a("tr",null,[a("th",{style:{width:"35%"}},"Name"),a("th",{style:{width:"35%"}},"Should be"),a("th",{style:{width:"30%"}},"Now")])].concat(Object(f["a"])(function(){var t=[];return e.brokenPropotionArr.forEach((function(e){t.push(a("tr",null,function(){return[a("td",null,e.name),a("td",null,e.good_percentage),a("td",null,e.bad_percentage)]}()))})),t}()))),duration:0})}}}),g={components:{},mixins:[h,b],data:function(){return{bodyHeight:300}},mounted:function(){var e=this;setTimeout((function(){e.bodyHeight=e.$refs.tblContainer1.clientHeight}),300),window.addEventListener("resize",(function(t){console.log("windows resizing"),e.bodyHeight=e.$refs.tblContainer1.clientHeight}))},methods:{openImg:function(e){this.showImageDilog=!0,this.imageUrl=e},jamiSumma:function(e){var t=e.columns,r=e.data,a=[];return t.forEach((function(e,t){if(0===t&&(a[t]="Жами"),"packTotalArea"===e.property||"item_num"===e.property||"sum"===e.property||"sum_kassa"===e.property){var n=r.map((function(t){return Number(t[e.property])}));if(n.every((function(e){return isNaN(e)})))a[t]="";else{var o=n.reduce((function(e,t){var r=Number(t);return isNaN(r)?e:e+t}),0);a[t]=o.toFixed(2)}}})),this.$nextTick((function(){})),a}}},v=g,w=(r("86ae"),r("2877")),k=Object(w["a"])(v,_,m,!1,null,null,null),y=k.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tools-wrapper"},[r("p",[e._v("List №: ALFAM-001 ")]),r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Choose a product"},model:{value:e.currentProduct,callback:function(t){e.currentProduct=t},expression:"currentProduct"}},e._l(e.products,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),r("el-checkbox",{staticStyle:{margin:"1em 0"},on:{change:e.brokenStateChanged},model:{value:e.withBorken,callback:function(t){e.withBorken=t},expression:"withBorken"}},[e._v("Include borkens")]),r("el-select",{staticClass:"tools-wrapper-item",staticStyle:{width:"100%"},attrs:{placeholder:"Choose action"},model:{value:e.currentStatus,callback:function(t){e.currentStatus=t},expression:"currentStatus"}},e._l(e.Procedures,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),r("el-select",{staticClass:"tools-wrapper-item",staticStyle:{width:"100%"},attrs:{placeholder:"Choose a customer"},model:{value:e.currentcustomer,callback:function(t){e.currentcustomer=t},expression:"currentcustomer"}},e._l(e.customers,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),r("el-select",{staticClass:"tools-wrapper-item",staticStyle:{width:"100%"},attrs:{placeholder:"Choose a Driver"},model:{value:e.currentcustomer,callback:function(t){e.currentcustomer=t},expression:"currentcustomer"}},e._l(e.customers,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),r("el-input",{staticClass:"tools-wrapper-item",attrs:{placeholder:"Cost to upload (so'm)"},model:{value:e.costOfUpload,callback:function(t){e.costOfUpload=t},expression:"costOfUpload"}}),r("el-input",{staticClass:"tools-wrapper-item",attrs:{value:e.totalPrice,type:"number",placeholder:"Discount price"},on:{input:e.changebase_price}}),r("div",{staticStyle:{"margin-bottom":"1em"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":""},model:{value:e.isDebt,callback:function(t){e.isDebt=t},expression:"isDebt"}}),e._v(" Is debt? ")],1),e.isDebt?r("el-date-picker",{staticStyle:{"margin-bottom":"1em"},attrs:{placeholder:"Debt back date"},model:{value:e.debtDate,callback:function(t){e.debtDate=t},expression:"debtDate"}}):e._e(),e.isDebt?r("el-input",{staticStyle:{"margin-bottom":"1em"},attrs:{type:"textarea",rows:"4"},model:{value:e.debtDescription,callback:function(t){e.debtDescription=t},expression:"debtDescription"}}):e._e(),r("div",{staticClass:"order-action-btn"},[e._t("default")],2)],1)},T=[],S={props:{totalPrice:{type:[Number,String],default:0}},data:function(){return{withBorken:!1,currentProduct:"",currentStatus:"",currentcustomer:"",costOfUpload:"",discountPrice:0,debtDescription:"",debtDate:"",isDebt:!1,products:[{label:"Nilufar",value:1}],Procedures:[{label:"Sotib olish",value:1},{label:"Barter (Almashtirish)",value:2},{label:"Qaytarib berish",value:3}],customers:[{label:"A",value:1},{label:"B",value:2},{label:"Q",value:3}]}},methods:{base_priceChangedOneOfItem:function(e){this.discountPrice=e,console.log("sends back",e)},changebase_price:function(e){this.$emit("totalPriceChanged",e)},brokenStateChanged:function(e){this.$emit("brokenState",e)}}},D=S,R=(r("d8f4"),Object(w["a"])(D,P,T,!1,null,null,null)),E=R.exports,O={name:"Shop",components:{Table:y,Tools:E},data:function(){return{totalPrice:0,broken:!1}},methods:{callSave:function(){this.$refs.calculatorRef.save()},calculateTotalPrice:function(e){this.totalPrice=e},totalPriceChanged:function(e){this.totalPrice=e,this.$refs.packingListTableRef_edit.calculatebase_prices(e)},changedBrokenState:function(e){this.broken=e},triggerSumTotalPrice:function(){this.$refs.packingListTableRef_edit.calculateTotalPrice()}}},C=O,x=Object(w["a"])(C,p,d,!1,null,null,null),A=x.exports,N={components:{editBody:A},props:{dialogVisible:{type:Boolean,default:!1}},data:function(){return{saving:!1}},computed:Object(o["a"])({},Object(i["e"])("others/orders",["currentDriver"])),methods:Object(o["a"])(Object(o["a"])({},Object(i["d"])("others/orders",["EDIT_DRIVER"])),{},{dialogOpened:function(){var e=this;this.newDriver=Object(o["a"])({},this.currentDriver),setTimeout((function(){e.$refs.editBodyRef.triggerSumTotalPrice()}),600)},cancel:function(){this.$emit("closeDialog")},save:function(){var e=this;this.saving=!0,setTimeout((function(){e.saving=!1,e.$refs.editBodyRef.callSave(),e.$emit("closeDialog")}),2e3)}})},I=N,j=(r("9e83"),Object(w["a"])(I,u,s,!1,null,null,null)),F=j.exports,z={components:{edit:F},data:function(){return{search_input:"",search_type:1,addDialog:!1,editDialog:!1,delete_Dialog:!1}},computed:Object(o["a"])({},Object(i["e"])("others/orders",["currentOrder","currentOrderHeader","currentTable"])),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])("others/orders",["SET_QUERY","SET_CURRENT_TABLE","SET_CURRENT_ORDER_HEADER"])),Object(i["b"])("others/orders",["GET_ORDERS"])),{},{searchTypeChanged:function(e){this.SET_QUERY({key:"search_input",value:e})},backToInventar:function(){var e=this;this.GET_ORDERS().then((function(){e.SET_CURRENT_TABLE("orderInventar"),e.SET_CURRENT_ORDER_HEADER({customer:"",product:"",order_name:""})}))}})},U=z,B=(r("2f81"),Object(w["a"])(U,c,l,!1,null,null,null)),$=B.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-col",{staticClass:"orders-page-body",attrs:{span:24}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{height:"calc(100% - 3.5rem)",data:e.orders,"row-class-name":e.tableRowClassName,"highlight-current-row":""},on:{"row-click":e.orderChosed}},[r("el-table-column",{attrs:{width:"50",type:"expand",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"inner-table"},[r("el-table",{staticStyle:{width:"80%"},attrs:{data:t.row.products,"show-header":!0,stripe:""}},[r("el-table-column",{attrs:{label:"КАФЕЛНИ КОДИ",prop:"code",fixed:"left",align:"center"}}),r("el-table-column",{attrs:{label:"СПЕЦИФИКАЦИЯСИ",prop:"type_name",align:"center"}}),r("el-table-column",{attrs:{label:"ТОВАРНИ РАЗМЕРИ",prop:"size",align:"center"}}),r("el-table-column",{attrs:{label:"ТОВАРНИ РАСМИ",prop:"photo",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:t.row.photo_path,fit:"scale-down"},on:{click:function(r){return e.openImg(t.row.photo_path)}}})]}}],null,!0)}),r("el-table-column",{attrs:{label:"1-ТА ПОЧКАДИГИ КОЛИЧЕСТВАНИ ЎЛЧОВ БИРЛИГИ",align:"center"}},[r("el-table-column",{attrs:{label:"ПОЧКАСИДИГИ (м2)",align:"center",prop:"area_of_one_packet"}}),r("el-table-column",{attrs:{label:"1-ДОНАСИНИ (м2)",prop:"area_of_an_item",align:"center"}}),r("el-table-column",{attrs:{align:"center",prop:"number_of_items",label:"УМУМИЙ ДОНАСИ"}}),r("el-table-column",{attrs:{label:"ПОЧКАСИДИГИ (КГ)",align:"center",prop:"wight_of_one_packet"}}),r("el-table-column",{attrs:{label:"1-ДОНАСИНИ  (КГ)",align:"center",prop:"weight_of_an_item"}})],1)],1)],1)]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"_id",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row._id.substr(0,6))+" ")]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"order_name",label:"Order No"}}),r("el-table-column",{attrs:{width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(parseFloat(e.getTotalAre(t.row.products).packTotalArea.toFixed(4)))+" ")]}}])},[r("template",{slot:"header"},[r("span",[e._v("Area m"),r("sup",[e._v("2")])])])],2),r("el-table-column",{attrs:{width:"180",align:"center",label:"Number of items"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{"show-header":!1,data:e.gridData(t.row.products)}},[r("el-table-column",{attrs:{align:"center",width:"120",property:"name",label:"name"}}),r("el-table-column",{attrs:{align:"center",width:"100",property:"value",label:"value"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isReturning||3===t.row.action?r("span",{staticStyle:{color:"red"}},[e._v(" - "+e._s(t.row.value))]):r("span",{staticStyle:{color:"green"}},[e._v(" + "+e._s(t.row.value))])]}}],null,!0)})],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(e.getTotalNumber(t.row.products).item_num))])],1)]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",label:"Pack / Overpack num"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getPackNumber(t.row.products).pack_num)+" / "+e._s(e.getOverPackNumber(t.row.products).over_pack_num)+" ")]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"last_sum",label:"Price"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{"show-header":!1,data:e.gridDataPrice(t.row.products)}},[r("el-table-column",{attrs:{align:"center",width:"120",property:"name",label:"name"}}),r("el-table-column",{attrs:{align:"center",width:"100",property:"value",label:"value"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isReturning||3===t.row.action?r("span",{staticStyle:{color:"red"}},[e._v(" "+e._s(parseFloat(t.row.value.toFixed(4))))]):r("span",{staticStyle:{color:"green"}},[e._v(" + "+e._s(parseFloat(t.row.value.toFixed(4))))])]}}],null,!0)})],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[r("span",{},[e._v("+ "+e._s(e.getPriceMinusPlus(t.row.products).plus))]),e._v(" / "),r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.getPriceMinusPlus(t.row.products).minus))])])],1)]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"driver",label:"Driver"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.driver.firstName+" "+t.row.driver.lastName)+" ")]}}])}),e.roles.includes("admin")?r("el-table-column",{attrs:{width:"180",align:"center",label:"Stuff"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.stuff.firstName+" "+t.row.user.stuff.lastName)+" ")]}}],null,!1,86873805)}):e._e(),r("el-table-column",{attrs:{prop:"status",width:"130",align:"center",label:"Checkout status",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-checkbox",{attrs:{value:t.row.did_checkout},on:{change:function(r){return e.setCheckoutStatus(r,t.row)}}})]}}])}),r("el-table-column",{attrs:{prop:"action",width:"100",align:"center",label:e.currentOrderHeader.order_name?"Action":"Last action",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.actions[t.row.action])+" ")]}}])})],1),r("div",{staticClass:"pgntion"},[r("Pagination",{attrs:{total:102,page:1,limit:20}})],1),r("el-dialog",{attrs:{title:"",visible:e.showImageDilog,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.showImageDilog=t}}},[r("el-image",{staticStyle:{width:"100%",height:"90%"},attrs:{src:e.imageUrl,fit:"scale-down"}})],1)],1)},L=[],M=r("1da1"),G=(r("96cf"),r("333d")),q=r("5c96"),Q={name:"InnerTable",components:{Pagination:G["a"]},data:function(){return{baseApi:"http://165.232.153.58:3001/",showImageDilog:!1,actuality:!1,imageUrl:"",actions:["","Buying","Barter","Returning"],statuses:["el-icon-loading","el-icon-error","el-icon-success"],statuses_text:["Waiting approvement","Order ejected","Order accepted"],statuses_color:["gray","red","green"]}},computed:Object(o["a"])(Object(o["a"])({},Object(i["e"])("user",["roles"])),Object(i["e"])("others/orders",["orders","tableLoading","currentOrderHeader"])),beforeDestroy:function(){this.SET_ORDER(null)},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])("others/orders",["SET_ORDER","SET_CURRENT_ORDER_HEADER"])),Object(i["b"])("others/orders",["GET_ORDERS","GET_CURRENT_ORDER","DO_CHECKOUT"])),{},{setCheckoutStatus:function(e,t){var r=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.DO_CHECKOUT({did_checkout:!t.did_checkout,order_id:t._id});case 3:a=e.sent,Object(q["Message"])({message:"Success: "+a.data,type:"success",duration:2e3}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),Object(q["Message"])({message:"Error: "+e.t0.response.data,type:"error",duration:4e3});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.did_checkout?"":"warning-row"},openImg:function(e){this.showImageDilog=!0,this.imageUrl=e},orderChosed:function(e){-1===e.status?this.SET_ORDER(e):this.$notify({message:"You cant edit this order: order already processed by zavsklad",type:"warning",duration:4e3})},getTotalAre:function(e){return e.reduce((function(e,t){return{packTotalArea:e.packTotalArea+t.packTotalArea}}))},getTotalNumber:function(e){return e.reduce((function(e,t){return{item_num:e.item_num+t.item_num}}))},getPackNumber:function(e){return e.reduce((function(e,t){return{pack_num:e.pack_num+t.pack_num}}))},getOverPackNumber:function(e){return e.reduce((function(e,t){return{over_pack_num:e.over_pack_num+t.over_pack_num}}))},gridData:function(e){var t={name:"",value:"",isReturning:!1},r=[];return e.forEach((function(e){t.name=e.type_name+(e.is_broken?" - broken":""),t.value=e.item_num,t.isReturning=e.isReturning,r.push(t),t={name:"",value:"",isReturning:!1}})),r},getPriceMinusPlus:function(e){var t=0,r=0;return e.forEach((function(e){e.isReturning?t+=e.sum:r+=e.sum})),t=parseFloat(t.toFixed(4)),r=parseFloat(r.toFixed(4)),{minus:t,plus:r}},gridDataPrice:function(e){var t={name:"",value:"",isReturning:!1},r=[];return e.forEach((function(e){t.name=e.type_name+(e.is_broken?" - broken":""),t.value=e.sum,t.isReturning=e.isReturning,r.push(t),t={name:"",value:"",isReturning:!1}})),r}})},V=Q,Y=(r("a405"),Object(w["a"])(V,H,L,!1,null,null,null)),W=Y.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-col",{staticClass:"orders-page-body",attrs:{span:24}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{height:"calc(100% - 3.5rem)",data:e.orders,stripe:"","highlight-current-row":""},on:{"row-dblclick":e.rowChosen,"row-click":e.orderChosed}},[r("el-table-column",{attrs:{type:"expand",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"inner-table"},[r("el-table",{staticStyle:{width:"80%"},attrs:{data:t.row.products,"show-header":!0,stripe:""}},[r("el-table-column",{attrs:{label:"КАФЕЛНИ КОДИ",prop:"code",fixed:"left",align:"center"}}),r("el-table-column",{attrs:{label:"СПЕЦИФИКАЦИЯСИ",prop:"type_name",align:"center"}}),r("el-table-column",{attrs:{label:"ТОВАРНИ РАЗМЕРИ",prop:"size",align:"center"}}),r("el-table-column",{attrs:{label:"ТОВАРНИ РАСМИ",prop:"photo",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.photo_path,fit:"scale-down"},on:{click:function(r){return e.openImg(t.row.photo_path)}}})]}}],null,!0)}),r("el-table-column",{attrs:{label:"1-ТА ПОЧКАДИГИ КОЛИЧЕСТВАНИ ЎЛЧОВ БИРЛИГИ",align:"center"}},[r("el-table-column",{attrs:{label:"ПОЧКАСИДИГИ (м2)",align:"center",prop:"area_of_one_packet"}}),r("el-table-column",{attrs:{label:"1-ДОНАСИНИ (м2)",prop:"area_of_an_item",align:"center"}}),r("el-table-column",{attrs:{align:"center",prop:"number_of_items",label:"УМУМИЙ ДОНАСИ"}}),r("el-table-column",{attrs:{label:"ПОЧКАСИДИГИ (КГ)",align:"center",prop:"wight_of_one_packet"}}),r("el-table-column",{attrs:{label:"1-ДОНАСИНИ  (КГ)",align:"center",prop:"weight_of_an_item"}})],1)],1)],1)]}}])}),r("el-table-column",{attrs:{width:"100",align:"center",prop:"_id",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row._id.substr(0,6))+" ")]}}])}),r("el-table-column",{attrs:{width:"160",align:"center",prop:"order_name",label:"Order No"}}),r("el-table-column",{attrs:{width:"170",align:"center",prop:"product",label:"Product"}}),r("el-table-column",{attrs:{width:"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{"show-header":!1,data:e.gridDataArea(t.row.products)}},[r("el-table-column",{attrs:{align:"center",width:"120",property:"name",label:"name"}}),r("el-table-column",{attrs:{align:"center",width:"100",property:"value",label:"value"}})],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(" "+e._s(parseFloat(e.getTotalAre(t.row.products).packTotalArea.toFixed(4)))+" ")])],1)]}}])},[r("template",{slot:"header"},[r("span",[e._v("Area m"),r("sup",[e._v("2")])])])],2),r("el-table-column",{attrs:{width:"170",align:"center",label:"Number of items"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{"show-header":!1,data:e.gridData(t.row.products)}},[r("el-table-column",{attrs:{align:"center",width:"120",property:"name",label:"name"}}),r("el-table-column",{attrs:{align:"center",width:"100",property:"value",label:"value"}})],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(e.getTotalNumber(t.row.products).item_num))])],1)]}}])}),r("el-table-column",{attrs:{width:"170",align:"center",label:"Pack / Overpack num"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getPackNumber(t.row.products).pack_num)+" / "+e._s(e.getOverPackNumber(t.row.products).over_pack_num)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",prop:"last_sum",label:"Price"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{"show-header":!1,data:e.gridDataPrice(t.row.products)}},[r("el-table-column",{attrs:{align:"center",width:"120",property:"name",label:"name"}}),r("el-table-column",{attrs:{align:"center",width:"100",property:"value",label:"value"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(" "+e._s(parseFloat(t.row.value.toFixed(4))))])]}}],null,!0)})],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(" "+e._s(parseFloat(t.row.last_sum.toFixed(4)))+" ")])],1)]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"customer",label:"Customer"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.customer.firstName+" "+t.row.customer.lastName)+" ")]}}])}),r("el-table-column",{attrs:{width:"230",align:"center",prop:"address",label:"Address"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.customer.address)+" ")]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"driver",label:"Driver"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.driver.firstName+" "+t.row.driver.lastName)+" ")]}}])}),e.roles.includes("admin")?r("el-table-column",{attrs:{width:"180",align:"center",label:"Stuff"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.stuff.firstName+" "+t.row.user.stuff.lastName)+" ")]}}],null,!1,86873805)}):e._e(),r("el-table-column",{attrs:{width:"80",align:"center",label:"Actuality",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.actuality_status?"Open":"Closed",placement:"left-start"}},[r("el-checkbox",{attrs:{value:t.row.actuality_status,disabled:!t.row.actuality_status},on:{change:function(r){return e.closeCurrentOrder(t.row)}}})],1)]}}])})],1),r("div",{staticClass:"pgntion"},[r("Pagination",{attrs:{total:102,page:1,limit:20}})],1),r("el-dialog",{attrs:{title:"",visible:e.showImageDilog,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.showImageDilog=t}}},[r("el-image",{staticStyle:{width:"100%",height:"90%"},attrs:{src:e.imageUrl,fit:"scale-down"}})],1)],1)},K=[],X={name:"OrderInventar",components:{Pagination:G["a"]},data:function(){return{baseApi:"http://165.232.153.58:3001/",showImageDilog:!1,actuality:!1,imageUrl:"",statuses:["el-icon-loading","el-icon-error","el-icon-success"],statuses_text:["Waiting approvement","Order ejected","Order accepted"],statuses_color:["gray","red","green"]}},computed:Object(o["a"])(Object(o["a"])({},Object(i["e"])("user",["roles"])),Object(i["e"])("others/orders",["orders","tableLoading","currentOrderHeader"])),mounted:function(){this.GET_ORDERS()},beforeDestroy:function(){this.SET_ORDER(null)},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])("others/orders",["SET_ORDER","SET_CURRENT_ORDER_HEADER","SET_CURRENT_TABLE"])),Object(i["b"])("others/orders",["GET_ORDERS","GET_CURRENT_ORDER","CLOSE_CURRENT_ORDER"])),{},{rowChosen:function(e){var t=this;console.log(e),this.GET_CURRENT_ORDER().then((function(){t.SET_CURRENT_ORDER_HEADER(e),t.SET_CURRENT_TABLE("innerTable")}))},gridDataPrice:function(e){var t={name:"",value:"",isReturning:!1},r=[];return e.forEach((function(e){t.name=e.type_name+(e.is_broken?" - broken":""),t.value=e.sum,t.isReturning=e.isReturning,r.push(t),t={name:"",value:"",isReturning:!1}})),r},gridDataArea:function(e){var t={name:"",value:"",isReturning:!1},r=[];return e.forEach((function(e){t.name=e.type_name+(e.is_broken?" - broken":""),t.value=e.packTotalArea,t.isReturning=e.isReturning,r.push(t),t={name:"",value:"",isReturning:!1}})),r},openImg:function(e){this.showImageDilog=!0,this.imageUrl=e},orderChosed:function(e){this.SET_ORDER(e)},getTotalAre:function(e){return e.reduce((function(e,t){return{packTotalArea:e.packTotalArea+t.packTotalArea}}))},getTotalNumber:function(e){return e.reduce((function(e,t){return{item_num:e.item_num+t.item_num}}))},getPackNumber:function(e){return e.reduce((function(e,t){return{pack_num:e.pack_num+t.pack_num}}))},getOverPackNumber:function(e){return e.reduce((function(e,t){return{over_pack_num:e.over_pack_num+t.over_pack_num}}))},gridData:function(e){var t={name:"",value:""},r=[];return e.forEach((function(e){t.name=e.type_name+(e.is_broken?" - broken":""),t.value=e.item_num,r.push(t),t={name:"",value:""}})),r},closeCurrentOrder:function(e){var t=this;console.log("row:",e),this.CLOSE_CURRENT_ORDER({order_id:e._id,consumer:e.customer._id,product_id:e.product_id}).then((function(){t.GET_ORDERS()})).catch((function(e){console.error(e)}))}})},Z=X,ee=(r("aeb2"),Object(w["a"])(Z,J,K,!1,null,null,null)),te=ee.exports,re={name:"OrdersList",components:{Tools:$,orderInventar:te,innerTable:W},data:function(){return{key:Math.random()}},computed:Object(o["a"])({},Object(i["e"])("others/orders",["currentTable"])),beforeDestroy:function(){console.log("Is destrotying"),this.SET_CURRENT_TABLE("orderInventar"),this.SET_CURRENT_ORDER_HEADER({customer:"",product:"",order_name:""})},methods:Object(o["a"])({},Object(i["d"])("others/orders",["SET_CURRENT_TABLE","SET_CURRENT_ORDER_HEADER"]))},ae=re,ne=(r("ab9d"),Object(w["a"])(ae,a,n,!1,null,null,null));t["default"]=ne.exports},"5f09":function(e,t,r){},6804:function(e,t,r){},"7db0":function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").find,o=r("44d2"),i=r("ae40"),c="find",l=!0,u=i(c);c in[]&&Array(1)[c]((function(){l=!1})),a({target:"Array",proto:!0,forced:l||!u},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(c)},"86ae":function(e,t,r){"use strict";r("8a10")},"8a10":function(e,t,r){},"9e83":function(e,t,r){"use strict";r("5f09")},a405:function(e,t,r){"use strict";r("6804")},ab9d:function(e,t,r){"use strict";r("b7a7")},aeb2:function(e,t,r){"use strict";r("3733")},b65f:function(e,t,r){var a=r("23e7"),n=Math.ceil,o=Math.floor;a({target:"Math",stat:!0},{trunc:function(e){return(e>0?o:n)(e)}})},b7a7:function(e,t,r){},c921:function(e,t,r){},d8f4:function(e,t,r){"use strict";r("c921")},f8bf:function(e,t,r){"use strict";r("2553")}}]);