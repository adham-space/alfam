(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d80b8ed"],{"110a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticStyle:{padding:"1em"}},[a("el-col",{staticStyle:{height:"calc(100vh - 85px)","overflow-y":"auto"},attrs:{span:11}},[a("el-form",{ref:"storeFormRef",attrs:{model:t.formDataObj,rules:t.rules}},[a("el-col",{staticClass:"toolbar-store",attrs:{lg:{offset:0,span:24},md:{offset:0,span:24}}},[a("el-form-item",{attrs:{prop:"currentProduct"}},[a("el-select",{staticStyle:{"margin-right":"1em"},attrs:{value:t.formDataObj.currentProduct,disabled:"",placeholder:"Махсулот номи"},on:{change:t.currentProductIsGoingToChange}},t._l(t.products_types,(function(t){return a("el-option",{key:t._id,attrs:{label:t.product_name,value:t._id}})})),1)],1),a("el-form-item",{attrs:{prop:"current_subType"}},[a("el-select",{staticStyle:{"margin-right":"1em"},attrs:{placeholder:"Турлари"},on:{change:t.setCurrentType},model:{value:t.formDataObj.current_subType,callback:function(e){t.$set(t.formDataObj,"current_subType",e)},expression:"formDataObj.current_subType"}},t._l(t.subTypes,(function(t){return a("el-option",{key:t._id,attrs:{label:t.type_name,value:t._id}})})),1)],1),a("el-form-item",{attrs:{prop:"singan"}},[a("el-checkbox",{staticStyle:{"margin-left":"1rem"},attrs:{value:t.formDataObj.singan},on:{change:t.changedBrokenState}},[t._v("Синган")])],1)],1),a("el-col",{attrs:{lg:{offset:0,span:24},md:{offset:0,span:24}}},[a("p",[t._v(" ПАРТИЯ: "),a("span",{staticStyle:{"background-color":"green",color:"white"}},[t._v(t._s(t.partiya_title))])])]),a("el-col",{staticClass:"store-bdy",attrs:{lg:{offset:0,span:24},md:{offset:0,span:24}}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("1 ТА КАРОБКАНИ МАъЛУМОТИ")])]),a("div",{staticClass:"one-packet"},[a("span",[a("span",{staticStyle:{color:"darkgray","margin-right":"1rem"}},[t._v("ДОНАСИНИ ЮЗАСИ: ")]),t._v(t._s(Object.keys(t.currentType).length>0?t.areaOfOneItem():"_")+" "),a("span",{staticStyle:{color:"darkgray"}},[t._v("M"),a("sup",[t._v("2")])])]),a("div",{staticClass:"amountAndWeight"},[a("span",{staticStyle:{"margin-top":"1rem"}},[a("span",{staticStyle:{color:"darkgray","margin-right":"1rem"}},[t._v("1 КАРОБКАДАГИ ДОНАСИ: ")]),a("el-form-item",{attrs:{prop:"numberOfItems"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:t.hidePacketField,type:"number",placeholder:"Донаси"},on:{input:t.packetSizeChanged},model:{value:t.formDataObj.numberOfItems,callback:function(e){t.$set(t.formDataObj,"numberOfItems",e)},expression:"formDataObj.numberOfItems"}})],1)],1),a("span",{staticStyle:{"margin-top":"1rem","margin-left":"1rem"}},[a("span",{staticStyle:{color:"darkgray","margin-right":"1rem"}},[t._v("1 ТА КАРОБКАНИНГ УМУМИЙ ОҒИРЛИГИ: ")]),a("el-form-item",{attrs:{prop:"weightOfPacket"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:t.hidePacketField,type:"number",placeholder:"Кг"},on:{input:t.packetSizeChanged},model:{value:t.formDataObj.weightOfPacket,callback:function(e){t.$set(t.formDataObj,"weightOfPacket",e)},expression:"formDataObj.weightOfPacket"}})],1)],1)]),a("span",{staticStyle:{"margin-top":"1rem"}},[a("span",{staticStyle:{color:"darkgray","margin-right":"1rem"}},[t._v("1 ТА КАРОБКАНИНГ УМУМИЙ ЮЗАСИ: ")]),t._v(t._s(""===t.formDataObj.numberOfItems?"_":t.areaOfOnePacket())+" "),a("span",{staticStyle:{color:"darkgray"}},[t._v("M"),a("sup",[t._v("2")])])]),a("span",{staticStyle:{"margin-top":"1rem"}},[a("span",{staticStyle:{color:"darkgray","margin-right":"1rem"}},[t._v("1 ТА ДОНАСИНИ ОҒИРЛИГИ: ")]),t._v(t._s(""===t.formDataObj.weightOfPacket?"_":t.wightOfOneItem())+" "),a("span",{staticStyle:{color:"darkgray"}},[t._v("Кг")])]),a("div",{staticClass:"amountAndWeight"},[a("span",{staticStyle:{"margin-top":"1rem"}},[a("span",{staticStyle:{color:"darkgray","margin-right":"1rem"}},[t._v("КАССА НАРХИ: ")]),a("el-form-item",{attrs:{prop:"base_price"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"касса нархи"},model:{value:t.formDataObj.base_price,callback:function(e){t.$set(t.formDataObj,"base_price",e)},expression:"formDataObj.base_price"}})],1)],1),a("span",{staticStyle:{"margin-top":"1rem","margin-left":"1rem"}},[a("span",{staticStyle:{color:"darkgray","margin-right":"1rem"}},[t._v("БЎЙИЧА: ")]),a("el-form-item",{attrs:{prop:"base_priceBy"}},[a("el-switch",{attrs:{disabled:t.hidePacketField},model:{value:t.formDataObj.base_priceBy,callback:function(e){t.$set(t.formDataObj,"base_priceBy",e)},expression:"formDataObj.base_priceBy"}}),t._v(" "+t._s(t.base_priceByText)+" ")],1)],1)]),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("span",{staticStyle:{"margin-top":"1rem"}},[a("span",{staticStyle:{color:"darkgray","margin-right":"1rem"}},[t._v("МАҚСАД: ")]),a("el-form-item",{attrs:{prop:"target_date"}},[a("el-date-picker",{attrs:{disabled:t.disableDatePicker||t.hidePacketField,type:"date",placeholder:"МАҚСАД"},model:{value:t.formDataObj.target_date,callback:function(e){t.$set(t.formDataObj,"target_date",e)},expression:"formDataObj.target_date"}})],1)],1),t.isTargetSet?a("el-button",{staticStyle:{"margin-left":"1em"},attrs:{disabled:t.hidePacketField,icon:"el-icon-edit",type:"text"},on:{click:function(e){t.editTarget=!0}}}):t._e()],1)])]),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"1rem"},attrs:{shadow:"hover"}},[a("div",{staticStyle:{height:"4rem"},attrs:{slot:"header"},slot:"header"},[t._v("Складга сақлаш")]),a("div",{staticClass:"one-packet"},[a("span",{staticStyle:{color:"darkgray","margin-right":"1rem"}},[t._v("УМИМИЙ ЮЗАСИ: ")]),a("el-form-item",{attrs:{prop:"totalArea"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"M2"},on:{input:t.totalAreaChanged},model:{value:t.formDataObj.totalArea,callback:function(e){t.$set(t.formDataObj,"totalArea",e)},expression:"formDataObj.totalArea"}})],1),a("span",{staticStyle:{"margin-top":"1rem"}},[a("span",{staticStyle:{color:"darkgray"}},[t._v("УМИМИЙ ДОНАСИНИ СОНИ: ")]),a("el-form-item",{attrs:{prop:"totalNumberOfItem"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{value:parseFloat(t.formDataObj.totalNumberOfItem),type:"number",placeholder:"умумий донаси"},on:{input:t.changedTotalNumber}}),t._v(" дона ")],1)],1),a("span",{staticStyle:{"margin-top":"1rem"}},[a("span",{staticStyle:{color:"darkgray"}},[t._v("УМИМИЙ ПАКЕТЛАРИНИ СОНИ: ")]),a("span",{style:{color:t.errorOccured?"red":"black"}},[a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{prop:"numberOfPacket"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{value:parseFloat(t.formDataObj.numberOfPacket),type:"number",placeholder:"умумий почкасини донаси"},on:{input:t.changedTotalPacketNumber}}),t._v(" / ")],1),a("el-form-item",{attrs:{prop:"overPacketNumberOfItems"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{value:parseFloat(t.formDataObj.overPacketNumberOfItems),type:"number",placeholder:"донаси"},on:{input:t.notCompletePacketItem}}),t._v(" дона ")],1)],1)]),t.errorOccured?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"(m2) MA'LUMOTI XATO KIRITILGAN",placement:"top"}},[a("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"red"}},[t._v(" ХАТО")])]):t._e()],1),a("span",{staticStyle:{"margin-top":"1rem"}},[a("span",{staticStyle:{color:"darkgray"}},[t._v("УМИМИЙ ОҒИРЛИГИ: ")]),t._v(t._s(Object.keys(t.currentType).length>0&&""!==t.formDataObj.totalArea?t.totalWeight():"_")+" Кг")])],1)]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{prop:"description"}},[a("el-input",{staticStyle:{margin:"1em 0",width:"100%"},attrs:{type:"textarea",placeholder:"Description"},model:{value:t.formDataObj.description,callback:function(e){t.$set(t.formDataObj,"description",e)},expression:"formDataObj.description"}})],1),a("el-button",{staticStyle:{color:"green"},attrs:{disabled:t.isSaving||t.errorOccured,icon:"el-icon-check"},on:{click:function(e){return t.storeEditedToSklad()}}})],1)],1)],1),a("el-col",{staticStyle:{height:"calc(100vh - 180px)","overflow-y":"auto"},attrs:{span:13}},[a("el-button",{staticStyle:{margin:"0 0 0.5em 0.5em","text-align":"right"},attrs:{disabled:t.isSaving,loading:t.isSaving},on:{click:function(e){return t.saveAllEditedToSklad()}}},[t._v("Сохранить")]),a("el-table",{key:t.currentTableKey,attrs:{border:"",data:t.edit_batch_of_product}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"Тури",prop:"product_type_name"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.getProductTypeName(e.row.product_type)+(e.row.broken?"-синган":""))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"Умумий юзаси",prop:"total_area"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"Умумий донаси",prop:"total_number_of_items"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"Умумий пакелтлари",prop:"total_number_of_packets"}},[a("template",{slot:"header"},[a("span",[t._v("Умумий"),a("br"),t._v("пакелтлари")])])],2),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"Пакетдан ортиқча",prop:"total_number_of_over_packet"}},[a("template",{slot:"header"},[a("span",[t._v("Пакетдан"),a("br"),t._v("ортиқча")])])],2),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"Касса нархи",prop:"base_price"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"Бўйича",prop:"price_by"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.price_by?"Донаси":"Юзаси (м2)")+" ")]}}])},[t._v("\\ ")]),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"Донасини юзаси",prop:"area_of_an_item"}},[a("template",{slot:"header"},[a("span",[t._v("Донасини "),a("br"),t._v(" юзаси")])])],2),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"1 Почкадаги донаси",prop:"number_of_items"}},[a("template",{slot:"header"},[a("span",[t._v("1 Почкадаги"),a("br"),t._v("донаси")])])],2),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"160",label:"1 Почкасини оғирлиги",prop:"wight_of_one_packet"}},[a("template",{slot:"header"},[a("span",[t._v("1 Почкасини"),a("br"),t._v("оғирлиги")])])],2),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"1 Донасиини оғирлиги",prop:"weight_of_an_item"}},[a("template",{slot:"header"},[a("span",[t._v("1 Донасиини"),a("br"),t._v("оғирлиги")])])],2),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"160",label:"1 Почкасини юзаси",prop:"area_of_one_packet"}},[a("template",{slot:"header"},[a("span",[t._v("1 Почкасини "),a("br"),t._v(" юзаси")])])],2),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"Мақсад",prop:"target_date"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.getDate(e.row.target_date))+" ")]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"150",label:"Умумий оғирлиги",prop:"total_wight_of_packets"}},[a("template",{slot:"header"},[a("span",[t._v("Умумий"),a("br"),t._v("оғирлиги")])])],2)],1)],1),a("el-dialog",{attrs:{align:"center",title:"",visible:t.product_changing_warnig,width:"30%"},on:{"update:visible":function(e){t.product_changing_warnig=e}}},[a("span",[t._v("Сиз махсулотни ўзгартиряпсиз олдинги ўзгаришлар"),a("br"),t._v("ёъқотилади олдинги ўзгаришларни "),a("br"),t._v(" сохранит қилинг ёки бу ўзгаришлар ўчиришга рухсат берасизми?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.donotDeleteCurrentWork()}}},[t._v("Отмена")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.deleteAllWorkAndSetNewProduct()}}},[t._v("Тасдиқлаш")])],1)])],1)},o=[],i=a("5530"),n=(a("99af"),a("7db0"),a("d3b7"),a("ac1f"),a("1276"),a("a9e3"),a("a4d3"),a("e01a"),a("c740"),a("b680"),a("2f62")),s=a("b775"),c=a("5c96"),l=a("1da1"),m=(a("96cf"),{data:function(){return{inventar:[]}},methods:{getInventarForProduct:function(t,e){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["a"])({url:"/products/get-inventar-for-edit-archive",method:"GET",params:{product_id:t,batch:e}}).catch((function(){Object(c["Message"])({message:"Error on getting inventars",duration:1e3,type:"error"})}));case 2:a.inventar=r.sent,a.inventar=a.inventar.data,console.log("Inventars",a.inventar);case 5:case"end":return r.stop()}}),r)})))()}}}),u={mixins:[m],data:function(){return{todays_product_nums:"",there_is_product_type:!1,currentTableKey:0,editing_same_type:!1,temp_current_product:"",product_changing_warnig:!1,isTargetSet:!1,editTarget:!1,pickerOptions:{disabledDate:this.disabledDate,onPick:this.onpick},hidePacketField:!1,formDataObj:{totalNumberOfItem:"",numberOfPacket:"",currentProduct:"",current_subType:"",numberOfItems:"",weightOfPacket:"",overPacketNumberOfItems:"",base_price:"",base_priceBy:!1,singan:!1,totalArea:"",target_date:"",description:""},rules:{target_date:[{trigger:"change",required:!0,validator:function(t,e,a){console.log("value",e),e?a():a(new Error("Мақсад санаси киритилиши керак"))}}],currentProduct:[{trigger:"change",required:!0,validator:function(t,e,a){console.log("value",e),e?a():a(new Error("Product should be selected"))}}],current_subType:[{trigger:"change",required:!0,validator:function(t,e,a){e?a():a(new Error("Type of product should be selected"))}}],numberOfItems:[{trigger:"change",required:!0,validator:function(t,e,a){e>=0?a():a(new Error("Number should be enetered"))}}],weightOfPacket:[{trigger:"change",required:!0,validator:function(t,e,a){e>=0?a():a(new Error("Wight of packet should be enetered"))}}],base_price:[{trigger:"change",required:!0,validator:function(t,e,a){e>=0?a():a(new Error("Price should be enetered"))}}],totalArea:[{trigger:"change",required:!0,validator:function(t,e,a){e>=0?a():a(new Error("Total area should be enetered"))}}],overPacketNumberOfItems:[{trigger:"change",required:!0,validator:function(t,e,a){e||0===e?a():a(new Error("overPacketNumberOfItems should be enetered"))}}],numberOfPacket:[{trigger:"change",required:!0,validator:function(t,e,a){e>=0?a():a(new Error("numberOfPacket should be enetered"))}}],totalNumberOfItem:[{trigger:"change",required:!0,validator:function(t,e,a){e>=0?a():a(new Error("totalNumberOfItem should be enetered"))}}]},currentType:{},productName:"",typeName:"",isSaving:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(n["e"])("products",["edit_batch_of_product","editing_product_id","products_types","products","isThereBroken"])),{},{disableDatePicker:function(){return!!this.isTargetSet&&!this.editTarget},canISave:function(){return(!this.isThereBroken||!this.formDataObj.singan)&&!(!this.there_is_product_type&&this.formDataObj.singan)},disabledDate:function(t){return new Date>t},partiya_title:function(){var t=new Date;return console.log("can I save: ",this.canISave),this.canISave||Object(c["Message"])({message:"Сиз синган киритолмайсиз, чунки бу тўпламда ушбу турда бутун махсулот сақланмаган, ёки аввал синмаган маҳсулот турини сақлаш керак",duration:3500,type:"error"}),console.log(this.formDataObj.singan?0:1),"".concat(this.productName,"-").concat(this.typeName,"-").concat(this.todays_product_nums).concat(this.formDataObj.singan?"-broken":"","-").concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear())},subTypes:function(){var t=this,e=this.products_types.find((function(e){return e._id===t.formDataObj.currentProduct}));return console.log("pr",e),e?(this.productName=e.product_name,e.product_types):{}},errorOccured:function(){var t=this.notCompletePacketItems();console.log("checkNum",t);var e=t-parseInt(t);return e>0},base_priceByText:function(){return this.formDataObj.base_priceBy?"Донаси":"Юзаси (м2)"}}),mounted:function(){var t=this;setTimeout((function(){t.GET_TARGETS(t.editing_product_id).then((function(){setTimeout((function(){t.currentTableKey++}),120)}))}),200),this.formDataObj.currentProduct=this.editing_product_id,setTimeout((function(){var e=t.$route.params.id.split("-");e=Number(e[e.length-1]),t.getInventarForProduct(t.editing_product_id,e),t.todays_product_nums=e}),250)},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(n["d"])("products",["PUSH_EDIT_BATCH_OF_PRODUCTS","REMOVE_FROM_NEW_BATCH","SET_EDIT_BATCH_OF_PRODUCTS","SET_TARGETS"])),Object(n["b"])("products",["GET_PRODUCT_TYPES","GET_PRODUCTS","GET_TODAYS_PRODUCTS","GET_TARGETS"])),{},{getProductTypeName:function(t){return this.products_types[0].product_types.find((function(e){return e._id===t})).type_name},currentProductIsGoingToChange:function(t){this.formDataObj.currentProduct?(this.product_changing_warnig=!0,this.temp_current_product=t):this.formDataObj.currentProduct=t},donotDeleteCurrentWork:function(){this.product_changing_warnig=!1,this.temp_current_product=""},deleteAllWorkAndSetNewProduct:function(){this.product_changing_warnig=!1,this.formDataObj.currentProduct=this.temp_current_product,this.temp_current_product="",this.SET_NEW_BATCH_OF_PRODUCTS(-1)},storeEditedToSklad:function(){var t=this,e={partiya:this.todays_product_nums,title:this.partiya_title,product:this.formDataObj.currentProduct,product_type:this.formDataObj.current_subType,product_type_name:this.typeName,area_of_an_item:parseFloat(this.areaOfOneItem()),number_of_items:parseFloat(this.formDataObj.numberOfItems),wight_of_one_packet:parseFloat(this.formDataObj.weightOfPacket),area_of_one_packet:parseFloat(this.areaOfOnePacket()),weight_of_an_item:parseFloat(this.wightOfOneItem()),base_price:parseFloat(this.formDataObj.base_price),price_by:this.formDataObj.base_priceBy,broken:this.formDataObj.singan,total_area:parseFloat(this.formDataObj.totalArea),total_number_of_items:parseFloat(this.formDataObj.totalNumberOfItem),total_number_of_packets:parseFloat(this.formDataObj.numberOfPacket),total_wight_of_packets:parseFloat(this.totalWeight()),total_number_of_over_packet:parseFloat(this.notCompletePacketItems()),description:this.formDataObj.description,target_date:this.formDataObj.target_date,editTargetDate:this.editTarget,editing_same_type:this.editing_same_type,new:!1};console.log("send",e),this.$refs.storeFormRef.validate((function(a){if(!a||!t.canISave)return!1;var r=0;t.formDataObj.singan&&(r=t.edit_batch_of_product.findIndex((function(t){return t.product_type===e.product_type&&t.broken}))),-1===r?(e.new=!0,t.PUSH_EDIT_BATCH_OF_PRODUCTS(e),t.currentTableKey=Math.floor(100*Math.random()),t.resetAll()):t.checkIfWrongAmount(e.product_type,e.total_number_of_items)&&(t.SET_EDIT_BATCH_OF_PRODUCTS(e),t.editTarget&&t.SET_TARGETS({target:t.formDataObj.target_date}),t.editTarget=!1,t.currentTableKey=Math.floor(100*Math.random()),t.resetAll())}))},checkIfWrongAmount:function(t,e){var a=this.inventar.findIndex((function(e){return e.product_type===t})),r=this.edit_batch_of_product.findIndex((function(e){return e.product_type===t}));return a>=0?this.edit_batch_of_product[r].total_number_of_items-e<=0||this.edit_batch_of_product[r].total_number_of_items-e<=this.inventar[a].total_number_of_items||(Object(c["Message"])({message:"Инвентардаги махсулот миқдори камайтирилиган миқдордан кам қолган: Камайган миқдор: ".concat(this.edit_batch_of_product[r].total_number_of_items-e," ва Инвентардаги миқдор: ").concat(this.inventar[a].total_number_of_items),type:"error",duration:3500}),!1):(Object(c["Message"])({message:"Inventar topilmadi",type:"warning",duration:1500}),!1)},changedBrokenState:function(t){var e=this,a=this.edit_batch_of_product.findIndex((function(t){return t.product_type===e.formDataObj.current_subType}));this.there_is_product_type=-1!==a;var r=this.edit_batch_of_product.findIndex((function(t){return t.product_type===e.formDataObj.current_subType&&t.broken}));this.there_is_product_type?t?(this.hidePacketField=!0,this.formDataObj.singan=!0,r>-1?(this.formDataObj.totalArea=this.edit_batch_of_product[r].total_area,this.formDataObj.overPacketNumberOfItems=this.edit_batch_of_product[r].total_number_of_over_packet,this.formDataObj.numberOfPacket=this.edit_batch_of_product[r].total_number_of_packets,this.formDataObj.totalNumberOfItem=this.edit_batch_of_product[r].total_number_of_items):(this.editing_same_type=!1,this.formDataObj.totalArea="",this.formDataObj.overPacketNumberOfItems="",this.formDataObj.numberOfPacket="",this.formDataObj.totalNumberOfItem=""),this.formDataObj.numberOfItems=this.edit_batch_of_product[a].number_of_items,this.formDataObj.weightOfPacket=this.edit_batch_of_product[a].wight_of_one_packet,this.formDataObj.base_price=this.edit_batch_of_product[a].base_price,this.formDataObj.base_priceBy=this.edit_batch_of_product[a].price_by):(this.setIfAlreadyEnteredType(this.formDataObj.current_subType),this.hidePacketField=!1,this.formDataObj.singan=!1):Object(c["Message"])({message:"Сиз синган киритолмайсиз, чунки бу тўпламда ушбу турда бутун махсулот сақланмаган, ёки аввал синмаган маҳсулот турини сақлаш керак",duration:4500,type:"error"})},resetAll:function(){console.log("resetting all..."),this.editing_same_type=!1;var t=this.formDataObj.currentProduct;this.formDataObj.current_subType="",this.formDataObj.current_subTypeName="",this.formDataObj.base_priceBy=!1,this.formDataObj.singan=!1,this.formDataObj.totalArea="",this.formDataObj.target_date="",this.formDataObj.base_price="",this.formDataObj.weightOfPacket="",this.formDataObj.overPacketNumberOfItems="",this.formDataObj.numberOfPacket="",this.formDataObj.totalNumberOfItem="",this.formDataObj.numberOfItems="",this.currentType={},this.formDataObj.description="",this.areaOfOneItem(),this.areaOfOnePacket(),this.wightOfOneItem(),this.totalNumberOfItems(),this.numberOfPackets(),this.totalWeight(),this.areaOfOneItem(),this.typeName="",this.$refs.storeFormRef.resetFields(),this.formDataObj.currentProduct=t,this.hidePacketField=!1},setCurrentType:function(t){var e=this;this.setIfAlreadyEnteredType(t),this.formDataObj.singan=!1;var a=this.products_types.find((function(t){return t._id===e.formDataObj.currentProduct}));a?(this.currentType=a.product_types.find((function(e){return e._id===t})),this.typeName=this.currentType.type_name,this.getTargetDate(this.formDataObj.current_subType)):(this.currentType={},this.formDataObj.weightOfPacket="",this.formDataObj.numberOfItems="")},areaOfOneItem:function(){return this.currentType.height*this.currentType.width/1e4},areaOfOnePacket:function(){return parseFloat((this.currentType.height*this.currentType.width/1e4*this.formDataObj.numberOfItems).toFixed(4))},wightOfOneItem:function(){return(this.formDataObj.weightOfPacket/this.formDataObj.numberOfItems).toFixed(2)},totalWeight:function(){return(this.wightOfOneItem()*this.totalNumberOfItems()).toFixed(2)},totalAreaChanged:function(){this.formDataObj.totalNumberOfItem=parseFloat((this.formDataObj.totalArea/this.areaOfOneItem()).toFixed(2)),this.formDataObj.numberOfPacket=parseInt((this.formDataObj.totalNumberOfItem/this.formDataObj.numberOfItems).toFixed(2))},changedTotalNumber:function(t){console.log("and total number triggers",t),this.formDataObj.totalNumberOfItem=Number(t),this.formDataObj.numberOfPacket=parseInt(this.formDataObj.totalNumberOfItem/this.formDataObj.numberOfItems),this.formDataObj.overPacketNumberOfItems=this.formDataObj.totalNumberOfItem%this.formDataObj.numberOfItems,console.log(this.formDataObj.numberOfPacket),this.formDataObj.totalArea=parseFloat((this.formDataObj.totalNumberOfItem*this.areaOfOneItem()).toFixed(4))},changedTotalPacketNumber:function(t){this.formDataObj.numberOfPacket=Number(t),this.formDataObj.totalNumberOfItem=this.formDataObj.numberOfItems*this.formDataObj.numberOfPacket+this.formDataObj.overPacketNumberOfItems,this.formDataObj.totalArea=parseFloat((this.formDataObj.totalNumberOfItem*this.areaOfOneItem()).toFixed(4))},totalNumberOfItems:function(){return(this.formDataObj.totalArea/this.areaOfOneItem()).toFixed(3)},numberOfPackets:function(){return parseInt(this.totalNumberOfItems()/this.formDataObj.numberOfItems)},getDate:function(t){var e=new Date(t);return"".concat(e.getMonth()+1," / ").concat(e.getDate()," / ").concat(e.getFullYear())},notCompletePacketItems:function(){return this.formDataObj.totalNumberOfItem%this.formDataObj.numberOfItems},notCompletePacketItem:function(t){this.formDataObj.numberOfItems=Number(this.formDataObj.numberOfItems),this.formDataObj.overPacketNumberOfItems=Number(t)>this.formDataObj.numberOfItems?this.formDataObj.numberOfItems:Number(t),(this.formDataObj.numberOfPacket||0===this.formDataObj.numberOfPacket)&&(this.formDataObj.totalNumberOfItem=this.formDataObj.numberOfPacket*this.formDataObj.numberOfItems+this.formDataObj.overPacketNumberOfItems,this.formDataObj.totalArea=parseFloat((this.formDataObj.totalNumberOfItem*this.areaOfOneItem()).toFixed(4)))},getTargetDate:function(t){var e;this.edit_batch_of_product.length>0&&(e=this.edit_batch_of_product[0]),e?(this.isTargetSet=!0,this.formDataObj.target_date=e.target_date):(this.isTargetSet=!1,this.formDataObj.target_date="")},removeFromNewBatch:function(t){this.REMOVE_FROM_NEW_BATCH(t)},setIfAlreadyEnteredType:function(t){var e=this.edit_batch_of_product.find((function(e){return e.product_type===t}));e?(this.editing_same_type=!0,console.log("editing_same_type"),this.formDataObj.base_priceBy=e.price_by,this.formDataObj.singan=e.broken,this.formDataObj.base_price=e.base_price,this.formDataObj.target_date=e.target_date,this.formDataObj.weightOfPacket=e.wight_of_one_packet,this.formDataObj.numberOfItems=e.number_of_items,this.formDataObj.totalArea=e.total_area,this.formDataObj.overPacketNumberOfItems=e.total_number_of_over_packet,this.formDataObj.numberOfPacket=e.total_number_of_packets,this.formDataObj.totalNumberOfItem=e.total_number_of_items,this.formDataObj.description=e.description,this.areaOfOneItem(),this.areaOfOnePacket(),this.wightOfOneItem(),this.totalNumberOfItems(),this.numberOfPackets(),this.totalWeight(),this.areaOfOneItem()):(this.editing_same_type=!1,this.formDataObj.base_priceBy=!1,this.formDataObj.singan="",this.formDataObj.totalArea="",this.formDataObj.target_date="",this.formDataObj.base_price="",this.formDataObj.weightOfPacket="",this.formDataObj.overPacketNumberOfItems="",this.formDataObj.numberOfPacket="",this.formDataObj.totalNumberOfItem="",this.formDataObj.numberOfItems="",this.formDataObj.description="",this.areaOfOneItem(),this.areaOfOnePacket(),this.wightOfOneItem(),this.totalNumberOfItems(),this.numberOfPackets(),this.totalWeight(),this.areaOfOneItem())},saveAllEditedToSklad:function(){var t=this;this.isSaving=!0,Object(s["a"])({url:"/products/edit-product",method:"PUT",data:{new_batch:this.edit_batch_of_product},timeout:3e4}).then((function(e){t.isSaving=!1,t.editTarget=!1,t.SET_EDIT_BATCH_OF_PRODUCTS(-1),Object(c["Message"])({message:"Махсулот мувоффақиятли edited",duration:2e3,type:"success"}),t.resetAll(),t.$router.push("/store/archive")})).catch((function(e){t.isSaving=!1,Object(c["Message"])({message:"Махсулот сақлашда хатолик: "+e.response.data,duration:4e3,type:"error"})}))},packetSizeChanged:function(t){console.log("this.formDataObj.numberOfItems",this.formDataObj.numberOfItems),t&&this.formDataObj.totalNumberOfItem&&(this.changedTotalNumber(this.formDataObj.totalNumberOfItem),this.totalWeight())}})},f=u,b=(a("fe56"),a("2877")),d=Object(b["a"])(f,r,o,!1,null,null,null);e["default"]=d.exports},"5b2f":function(t,e,a){},"7db0":function(t,e,a){"use strict";var r=a("23e7"),o=a("b727").find,i=a("44d2"),n=a("ae40"),s="find",c=!0,l=n(s);s in[]&&Array(1)[s]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!l},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},fe56:function(t,e,a){"use strict";a("5b2f")}}]);