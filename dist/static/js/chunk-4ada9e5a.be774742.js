(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ada9e5a"],{"0de6":function(e,t,r){"use strict";r("6981")},3693:function(e,t,r){"use strict";r("cfaf")},"4c1f":function(e,t,r){"use strict";r("f071")},"5ec9":function(e,t,r){},6780:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{staticClass:"orders-body",attrs:{gutter:10}},[r("Tools"),r(e.currentTable,{tag:"current",attrs:{orders:e.orders}},[r("el-col",{staticStyle:{border:"0px solid gray","border-radius":"10px",height:"100%"},attrs:{span:5}},[r("div",{staticClass:"PartnerListTool"},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Partner"},model:{value:e.currentPartner,callback:function(t){e.currentPartner=t},expression:"currentPartner"}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.gettingPartners,expression:"gettingPartners"}],attrs:{"highlight-current-row":"",height:"calc(100% - 4rem)",data:e.partnersList},on:{"row-click":e.getCurrentPartnerOrders}},[r("el-table-column",{attrs:{align:"center",prop:"name",label:"Parners"}})],1)],1)],1)],1)],1)},n=[],o=r("5530"),i=(r("4de4"),r("d3b7"),r("caad"),r("2532"),r("b0c0"),r("2f62")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-col",{staticClass:"orders-page-tools",attrs:{span:24}},[r("div",{staticStyle:{display:"flex"}}),e.currentOrderHeader.order_name?r("div",{staticClass:"current-order",staticStyle:{flex:"1",margin:"0 1em","text-align":"right"}},[r("el-button",{staticClass:"el-icon-back",staticStyle:{border:"1px solid transparent","background-color":"white","font-size":"1.2em"},on:{click:function(t){return e.backToInventar()}}}),r("span",{staticStyle:{color:"gray"}},[e._v(e._s(e.currentOrderHeader.order_name))]),e._v(" / "),r("span",{staticStyle:{color:"gray"}},[e._v(e._s(e.currentOrderHeader.product))]),e._v(" / "),r("span",{staticStyle:{color:"gray"}},[e._v(e._s(e.currentOrderHeader.customer))])],1):e._e(),r("div",{staticStyle:{display:"flex"}},[r("el-button",{staticStyle:{border:"1px solid transparent"},attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.$router.push("/shop/shop-packing-list")}}}),r("edit",{attrs:{"dialog-visible":e.editDialog},on:{closeDialog:function(t){e.editDialog=!1}}})],1)])},l=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"Edit order",visible:e.dialogVisible,"custom-class":"customDialog",align:"center",fullscreen:"","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t},open:e.dialogOpened}},[r("editBody",{ref:"editBodyRef"},[r("span",{staticClass:"dialog-footer",staticStyle:{"margin-top":"1rem"}},[r("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("Cancel")]),r("el-button",{attrs:{loading:e.saving,type:"primary"},on:{click:function(t){return e.save()}}},[e._v("Save")])],1)])],1)},u=[],d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticStyle:{height:"calc(100vh - 96px)"}},[r("el-col",{staticStyle:{height:"calc(100vh - 96px)"},attrs:{span:19}},[r("Table",{ref:"packingListTableRef_edit",attrs:{broken:e.broken},on:{calculateTotalPrice:e.calculateTotalPrice}})],1),r("el-col",{staticStyle:{height:"calc(100vh - 86px)"},attrs:{span:5}},[r("Tools",{ref:"calculatorRef",attrs:{"total-price":e.totalPrice},on:{totalPriceChanged:e.totalPriceChanged,brokenState:e.changedBrokenState}},[e._t("default")],2)],1)],1)},p=[],_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"tblContainer1",staticStyle:{height:"calc(100vh - 86px)"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{"max-height":e.bodyHeight+"",size:"small",data:e.tableDataComputed,"show-summary":"","summary-method":e.jamiSumma}},[r("el-table-column",{attrs:{width:"150",label:"КАФЕЛНИ КОДИ",prop:"code",fixed:"left",align:"center"}}),r("el-table-column",{attrs:{width:"150",label:"СПЕЦИФИКАЦИЯСИ",prop:"type_name",align:"center"}}),r("el-table-column",{attrs:{width:"150",label:"ТОВАРНИ РАЗМЕРИ",prop:"size",align:"center"}}),r("el-table-column",{attrs:{width:"150",label:"ТОВАРНИ РАСМИ",prop:"photo",align:"center"}},[r("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:"https://images.unsplash.com/photo-1612831661153-4914a5ff7851?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2125&q=80",fit:"scale-down"},on:{click:function(t){return e.openImg("https://images.unsplash.com/photo-1612831661153-4914a5ff7851?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2125&q=80")}}})],1),r("el-table-column",{attrs:{width:"300",label:"УМУМИЙ МИҚДОРНИ ЎЛЧОВ БИРЛИГИ",align:"center"}},[r("el-table-column",{attrs:{width:"150",label:"УМУМИЙ (м2)",align:"center",prop:"packTotalArea"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"small",type:"number",value:t.row.packTotalArea},on:{input:function(r){return e.areaIsChanging(r,t.row)}}})]}}])}),r("el-table-column",{attrs:{width:"150",label:"УМУМИЙ (ДОНАСИ)",prop:"item_num",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"two-fields"},[r("el-input",{attrs:{size:"small",value:t.row.item_num},on:{input:function(r){return e.item_numIsChanging(r,t.row)}}})],1)]}}])})],1),r("el-table-column",{attrs:{width:"155",align:"center"}},[r("template",{slot:"header"},[r("span",[e._v("ТОВАРНИ УМУМИЙ")]),r("br"),r("span",[e._v("ПОЧКАСИНИЙ")]),r("br"),r("span",[e._v("(МИҚДОРИ)")]),r("br")]),r("el-table-column",{attrs:{width:"178",align:"center",prop:"pack_num"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"two-fields"},[r("div",{staticClass:"two-fields"},[r("el-input",{attrs:{size:"small",value:t.row.pack_num},on:{input:function(r){return e.pack_numIsChanging(r,t.row)}}})],1),r("div",{staticClass:"two-fields"},[r("el-input",{attrs:{size:"small",value:t.row.over_pack_num},on:{input:function(r){return e.over_pack_numIsChanging(r,t.row)}}})],1)])]}}])},[r("template",{slot:"header"},[r("span",[e._v("ТОВАРНИ УМУМИЙ")]),r("br"),r("span",[e._v("ДОНАСИНИ")]),r("br"),r("span",[e._v("(МИҚДОРИ)")]),r("br")])],2)],2),r("el-table-column",{attrs:{width:"100",prop:"base_price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticStyle:{"margin-right":"1em"},attrs:{effect:"dark",content:t.row.price_by?"Price by item number":"Price by area (m2)",placement:"left"}},[r("el-switch",{attrs:{value:t.row.price_by,"active-color":"#13ce66","inactive-color":""},on:{change:function(r){return e.calcPriceprice_byChanged(r,t.row)}}})],1)]}}])},[r("template",{slot:"header"},[r("span",[e._v("ТАН НАРХИ")]),r("br"),r("span",[e._v("m2 / Dona")])])],2),r("el-table-column",{attrs:{width:"120",label:"ТАН НАРХИ",prop:"base_price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.base_price))])]}}])}),r("el-table-column",{attrs:{width:"130",prop:"sum_kassa",align:"center"}},[r("template",{slot:"header"},[r("span",[e._v("СУММАСИ")]),r("br"),r("span",[e._v("КАССА")])])],2),r("el-table-column",{attrs:{width:"130",prop:"base_price_changed",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"small",type:"number",value:t.row.base_price_changed},on:{input:function(r){return e.base_priceIsChanging(r,t.row)}}})]}}])},[r("template",{slot:"header"},[r("span",[e._v("ЎЗГАРГАН")]),r("br"),r("span",[e._v("ТАН НАРХИ")])])],2),r("el-table-column",{attrs:{width:"130",label:"СУММАСИ",prop:"sum",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.sum.toFixed(2))+" ")]}}])}),r("el-table-column",{attrs:{width:"150",label:"ТОВАРНИ УМУМИЙ КИЛОГРАММИ",prop:"weight",align:"center"}}),r("el-table-column",{attrs:{label:"1-ТА ПОЧКАДИГИ КОЛИЧЕСТВАНИ ЎЛЧОВ БИРЛИГИ",align:"center"}},[r("el-table-column",{attrs:{width:"160",label:"ПОЧКАСИДИГИ (м2)",align:"center",prop:"area_of_one_packet"}}),r("el-table-column",{attrs:{width:"140",label:"1-ДОНАСИНИ (м2)",prop:"area_of_an_item",align:"center"}}),r("el-table-column",{attrs:{align:"center",prop:"number_of_items",width:"140",label:"УМУМИЙ ДОНАСИ"}}),r("el-table-column",{attrs:{width:"160",label:"ПОЧКАСИДИГИ (КГ)",align:"center",prop:"wight_of_one_packet"}}),r("el-table-column",{attrs:{width:"140",label:"1-ДОНАСИНИ  (КГ)",align:"center",prop:"weight_of_an_item"}})],1)],1),r("el-dialog",{attrs:{title:"",visible:e.showImageDilog,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.showImageDilog=t}}},[r("el-image",{staticStyle:{width:"100%",height:"90%"},attrs:{src:e.imageUrl,fit:"scale-down"}})],1)],1)},m=[],h=(r("159b"),r("d81d"),r("a9e3"),r("b680"),{props:{broken:{type:Boolean,default:!1}},data:function(){return{showImageDilog:!1,imageUrl:"",maxHeight:600,newArea:"",currentNotification:null,currentProduct:{},brokenPropotionArr:[],totalPrice:0,tableData:[{propotion:53.33,code:"1191A",type_name:"Ochi",size:"30 * 90",base_price:2,base_price_changed:14,sum:189,sum_kassa:27,price_by:!1,broken:!1,packTotalArea:13.5,item_num:50,pack_num:8,over_pack_num:2,wight_of_one_packet:28,weight_of_an_item:4.6,weight:229.99,area_of_one_packet:1.62,area_of_an_item:.27,number_of_items:6},{propotion:26.67,code:"1191D",type_name:"Decor",size:"30 * 90",broken:!1,base_price:4,base_price_changed:14,sum_kassa:8.64,sum:30.24,price_by:!1,packTotalArea:2.16,item_num:8,pack_num:1,over_pack_num:2,wight_of_one_packet:28,weight_of_an_item:4.6,weight:36.79,area_of_one_packet:1.62,area_of_an_item:.27,number_of_items:6},{propotion:53.33,broken:!0,code:"1191BR",type_name:"Ochi (Singan)",size:"30 * 90",base_price:2,base_price_changed:2,sum:0,sum_kassa:0,price_by:!1,packTotalArea:0,item_num:0,pack_num:0,over_pack_num:0,wight_of_one_packet:28,weight_of_an_item:4.6,weight:0,area_of_one_packet:1.62,area_of_an_item:.27,number_of_items:6},{propotion:20,code:"1191C",type_name:"Pol",size:"30 * 30",base_price:6,base_price_changed:6,sum_kassa:0,sum:0,packTotalArea:0,item_num:0,pack_num:0,broken:!1,price_by:!1,over_pack_num:0,wight_of_one_packet:25,weight_of_an_item:2.28,weight:0,area_of_one_packet:.99,area_of_an_item:.09,number_of_items:11}],tableData1:[{propotion:49,code:"1191A",type_name:"Ochi",size:"30 * 60",base_price:3e3,sum:0,packTotalArea:"",item_num:"",pack_num:"",over_pack_num:"",wight_of_one_packet:25,weight_of_an_item:3.125,weight:"",area_of_one_packet:1.44,area_of_an_item:.18,number_of_items:8},{propotion:25.2,code:"1191B",type_name:"To'qi",size:"30 * 60",packTotalArea:"",base_price:1200,item_num:"",pack_num:"",sum:0,over_pack_num:"",wight_of_one_packet:25,weight_of_an_item:3.125,weight:"",area_of_one_packet:1.44,area_of_an_item:.18,number_of_items:8},{propotion:5.3,code:"1191C",type_name:"Dekor",size:"30 * 60",packTotalArea:"",item_num:"",base_price:304,sum:0,pack_num:"",over_pack_num:"",wight_of_one_packet:25,weight_of_an_item:3.125,weight:"",area_of_one_packet:1.44,area_of_an_item:.18,number_of_items:8},{propotion:14.85,code:"1191D",type_name:"Pol",size:"30 * 30",packTotalArea:"",item_num:"",pack_num:"",over_pack_num:"",base_price:2e3,sum:0,wight_of_one_packet:21,weight_of_an_item:1.4,weight:"",area_of_one_packet:1.35,area_of_an_item:.09,number_of_items:15},{propotion:1.65,code:"1191F",type_name:"Friz",size:"30 * 6",packTotalArea:"",item_num:"",pack_num:"",base_price:300,sum:0,over_pack_num:"",wight_of_one_packet:21,weight_of_an_item:1.4,weight:"",area_of_one_packet:.72,area_of_an_item:.018,number_of_items:40},{propotion:1.1,code:"1191S",type_name:"Sigara",size:"30 * 2",packTotalArea:"",item_num:"",base_price:3401,pack_num:"",sum:0,over_pack_num:"",wight_of_one_packet:10,weight_of_an_item:.1,weight:"",area_of_one_packet:.6,area_of_an_item:.006,number_of_items:100},{propotion:2.76,code:"1191P",type_name:"Plintus",size:"30 * 10",packTotalArea:"",item_num:"",base_price:3401,pack_num:"",sum:0,over_pack_num:"",wight_of_one_packet:20,weight_of_an_item:.1,weight:"",area_of_one_packet:18.6,area_of_an_item:.03,number_of_items:620}]}},computed:{tableDataComputed:function(){var e=this;return this.broken?this.tableData:this.tableData.filter((function(t){return t.broken===e.broken}))}}}),f=r("2909"),b=(r("7db0"),r("b65f"),r("99af"),{methods:{areaIsChanging:function(e,t){if(this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),e){e=parseFloat(e),this.currentProduct.packTotalArea=this.truncateToDecimals(e,4);var r=this.truncateToDecimals(e/this.currentProduct.area_of_an_item,4),a=this.truncateToDecimals(parseFloat(r-parseInt(r)),4);r=Math.ceil(r),a<=1e-4&&e?(this.currentProduct.item_num=r,this.currentProduct.pack_num=parseInt(r/this.currentProduct.number_of_items),this.currentProduct.over_pack_num=parseInt(r%this.currentProduct.number_of_items),this.currentProduct.sum=parseInt(this.currentProduct.base_price*e),this.currentProduct.weight=this.truncateToDecimals(this.currentProduct.item_num*this.currentProduct.weight_of_an_item,2),this.calcPrice(),this.calculateTotalPrice(),this.checkPropotion()):0===e?(this.currentProduct.item_num=0,this.currentProduct.pack_num=0,this.currentProduct.over_pack_num=0,this.currentProduct.sum=0,this.calculateTotalPrice(),this.currentProduct.weight=0):(this.currentProduct.item_num="",this.currentProduct.pack_num="",this.currentProduct.over_pack_num="",this.currentProduct.sum=0,this.calculateTotalPrice(),this.currentProduct.weight="")}else this.currentProduct.packTotalArea=e},item_numIsChanging:function(e,t){this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),e?(this.currentProduct.item_num=parseInt(e),this.currentProduct.packTotalArea=this.truncateToDecimals(parseFloat(this.currentProduct.item_num*this.currentProduct.area_of_an_item),4),this.currentProduct.pack_num=parseInt(this.currentProduct.item_num/this.currentProduct.number_of_items),this.currentProduct.over_pack_num=parseInt(this.currentProduct.item_num%this.currentProduct.number_of_items),this.calcPrice(),this.currentProduct.weight=(this.currentProduct.item_num*this.currentProduct.weight_of_an_item).toFixed(2),this.checkPropotion(),this.calculateTotalPrice()):(this.currentProduct.over_pack_num="",this.currentProduct.item_num="",this.currentProduct.pack_num="",this.currentProduct.packTotalArea="",this.currentProduct.sum=0,this.calculateTotalPrice(),this.currentProduct.weight="")},pack_numIsChanging:function(e,t){this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),e?(this.currentProduct.pack_num=parseInt(e),this.currentProduct.item_num=parseInt(this.currentProduct.pack_num*this.currentProduct.number_of_items+this.currentProduct.over_pack_num),this.currentProduct.over_pack_num=""===this.currentProduct.over_pack_num?0:this.currentProduct.over_pack_num,this.currentProduct.packTotalArea=parseFloat((this.currentProduct.item_num*this.currentProduct.area_of_an_item).toFixed(4)),this.calcPrice(),this.currentProduct.weight=(this.currentProduct.item_num*this.currentProduct.weight_of_an_item).toFixed(2),this.checkPropotion(),this.calculateTotalPrice()):(this.currentProduct.pack_num=e,this.currentProduct.item_num="",this.currentProduct.item_num="",this.currentProduct.packTotalArea="",this.currentProduct.sum=0,this.calculateTotalPrice(),this.currentProduct.weight="")},over_pack_numIsChanging:function(e,t){this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),e?(this.currentProduct.over_pack_num=parseInt(e)>this.currentProduct.number_of_items?this.currentProduct.number_of_items:parseInt(e),this.currentProduct.item_num=parseInt(this.currentProduct.pack_num*this.currentProduct.number_of_items+this.currentProduct.over_pack_num),this.currentProduct.packTotalArea=parseFloat((this.currentProduct.item_num*this.currentProduct.area_of_an_item).toFixed(4)),this.currentProduct.weight=(this.currentProduct.item_num*this.currentProduct.weight_of_an_item).toFixed(2),this.calcPrice(),this.checkPropotion(),this.calculateTotalPrice()):(this.currentProduct.over_pack_num=e,this.currentProduct.item_num="",this.currentProduct.packTotalArea="",this.currentProduct.sum=0,this.calculateTotalPrice(),this.currentProduct.weight="")},base_priceIsChanging:function(e,t){this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),e?(this.currentProduct.base_price_changed=parseFloat(e),this.currentProduct.sum=parseFloat((this.currentProduct.base_price_changed*this.currentProduct.packTotalArea).toFixed(4)),this.calculateTotalPrice()):(this.currentProduct.base_price_changed=e,this.currentProduct.sum=0)},calculatebase_prices:function(e){if(e){e=""===e?0:parseFloat(e+"");var t=this.tableDataComputed.reduce((function(e,t){return e+(""===t.sum?0:parseFloat(t.sum))}),0),r=[];this.tableDataComputed.forEach((function(e){r.push(e.sum/t)}));for(var a=0;a<r.length;a++){var n=this.tableDataComputed[a];n.sum=e*r[a],n.price_by&&n.item_num?n.base_price_changed=n.sum/n.item_num:!n.price_by&&n.packTotalArea?n.base_price_changed=parseFloat((n.sum/n.packTotalArea).toFixed(4)):0!==n.price_by&&0!==n.packTotalArea&&this.$notify({message:"Number of item is unknown! or Area is unknown!",type:"error",duration:2300})}}},calcPrice:function(){var e=""===this.currentProduct.item_num?0:parseFloat(this.currentProduct.item_num),t=""===this.currentProduct.packTotalArea?0:parseFloat(this.currentProduct.packTotalArea);this.currentProduct.sum=this.currentProduct.base_price_changed*(this.currentProduct.price_by?e:t),this.currentProduct.sum_kassa=this.currentProduct.base_price*(this.currentProduct.price_by?e:t)},calcPriceprice_byChanged:function(e,t){this.currentProduct=this.tableDataComputed.find((function(e){return e._id===t._id})),this.currentProduct.price_by=e,this.calcPrice(),this.calculateTotalPrice()},truncateToDecimals:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=Math.pow(10,t);return Math.trunc(e*r)/r},calculateTotalPrice:function(){this.$emit("calculateTotalPrice",this.truncateToDecimals(this.tableDataComputed.reduce((function(e,t){return e+(""===t.sum?0:parseFloat(t.sum))}),0),2))},checkPropotion:function(){var e=this,t=this.tableDataComputed.reduce((function(e,t){return e+(""===t.packTotalArea?0:parseFloat(t.packTotalArea))}),0),r={name:"",bad_percentage:0,good_percentage:0};this.brokenPropotionArr=[],this.tableDataComputed.forEach((function(a){r.name=a.type_name,r.good_percentage=a.propotion,r.bad_percentage=0===t?0:e.truncateToDecimals(""===a.packTotalArea?0:parseFloat(a.packTotalArea)/t*100),e.brokenPropotionArr.push(r),r={name:"",bad_percentage:0,good_percentage:0}}));var a=this.$createElement;this.currentNotification&&this.currentNotification.close(),this.currentNotification=this.$notify({type:"error",title:"Proportion error",dangerouslyUseHTMLString:!0,message:a("table",{class:"notificationTable"},[a("tr",null,[a("th",{style:{width:"35%"}},"Name"),a("th",{style:{width:"35%"}},"Should be"),a("th",{style:{width:"30%"}},"Now")])].concat(Object(f["a"])(function(){var t=[];return e.brokenPropotionArr.forEach((function(e){t.push(a("tr",null,function(){return[a("td",null,e.name),a("td",null,e.good_percentage),a("td",null,e.bad_percentage)]}()))})),t}()))),duration:0})}}}),g={components:{},mixins:[h,b],data:function(){return{bodyHeight:300}},mounted:function(){var e=this;setTimeout((function(){e.bodyHeight=e.$refs.tblContainer1.clientHeight}),300),window.addEventListener("resize",(function(t){console.log("windows resizing"),e.bodyHeight=e.$refs.tblContainer1.clientHeight}))},methods:{openImg:function(e){this.showImageDilog=!0,this.imageUrl=e},jamiSumma:function(e){var t=e.columns,r=e.data,a=[];return t.forEach((function(e,t){if(0===t&&(a[t]="Жами"),"packTotalArea"===e.property||"item_num"===e.property||"sum"===e.property||"sum_kassa"===e.property){var n=r.map((function(t){return Number(t[e.property])}));if(n.every((function(e){return isNaN(e)})))a[t]="";else{var o=n.reduce((function(e,t){var r=Number(t);return isNaN(r)?e:e+t}),0);a[t]=o.toFixed(2)}}})),this.$nextTick((function(){})),a}}},k=g,v=(r("7e67"),r("2877")),w=Object(v["a"])(k,_,m,!1,null,null,null),y=w.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tools-wrapper"},[r("p",[e._v("List №: ALFAM-001 ")]),r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Choose a product"},model:{value:e.currentProduct,callback:function(t){e.currentProduct=t},expression:"currentProduct"}},e._l(e.products,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),r("el-checkbox",{staticStyle:{margin:"1em 0"},on:{change:e.brokenStateChanged},model:{value:e.withBorken,callback:function(t){e.withBorken=t},expression:"withBorken"}},[e._v("Include borkens")]),r("el-select",{staticClass:"tools-wrapper-item",staticStyle:{width:"100%"},attrs:{placeholder:"Choose action"},model:{value:e.currentStatus,callback:function(t){e.currentStatus=t},expression:"currentStatus"}},e._l(e.Procedures,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),r("el-select",{staticClass:"tools-wrapper-item",staticStyle:{width:"100%"},attrs:{placeholder:"Choose a customer"},model:{value:e.currentcustomer,callback:function(t){e.currentcustomer=t},expression:"currentcustomer"}},e._l(e.customers,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),r("el-select",{staticClass:"tools-wrapper-item",staticStyle:{width:"100%"},attrs:{placeholder:"Choose a Driver"},model:{value:e.currentcustomer,callback:function(t){e.currentcustomer=t},expression:"currentcustomer"}},e._l(e.customers,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),r("el-input",{staticClass:"tools-wrapper-item",attrs:{placeholder:"Cost to upload (so'm)"},model:{value:e.costOfUpload,callback:function(t){e.costOfUpload=t},expression:"costOfUpload"}}),r("el-input",{staticClass:"tools-wrapper-item",attrs:{value:e.totalPrice,type:"number",placeholder:"Discount price"},on:{input:e.changebase_price}}),r("div",{staticStyle:{"margin-bottom":"1em"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":""},model:{value:e.isDebt,callback:function(t){e.isDebt=t},expression:"isDebt"}}),e._v(" Is debt? ")],1),e.isDebt?r("el-date-picker",{staticStyle:{"margin-bottom":"1em"},attrs:{placeholder:"Debt back date"},model:{value:e.debtDate,callback:function(t){e.debtDate=t},expression:"debtDate"}}):e._e(),e.isDebt?r("el-input",{staticStyle:{"margin-bottom":"1em"},attrs:{type:"textarea",rows:"4"},model:{value:e.debtDescription,callback:function(t){e.debtDescription=t},expression:"debtDescription"}}):e._e(),r("div",{staticClass:"order-action-btn"},[e._t("default")],2)],1)},T=[],D={props:{totalPrice:{type:[Number,String],default:0}},data:function(){return{withBorken:!1,currentProduct:"",currentStatus:"",currentcustomer:"",costOfUpload:"",discountPrice:0,debtDescription:"",debtDate:"",isDebt:!1,products:[{label:"Nilufar",value:1}],Procedures:[{label:"Sotib olish",value:1},{label:"Barter (Almashtirish)",value:2},{label:"Qaytarib berish",value:3}],customers:[{label:"A",value:1},{label:"B",value:2},{label:"Q",value:3}]}},methods:{base_priceChangedOneOfItem:function(e){this.discountPrice=e,console.log("sends back",e)},changebase_price:function(e){this.$emit("totalPriceChanged",e)},brokenStateChanged:function(e){this.$emit("brokenState",e)}}},S=D,R=(r("b521"),Object(v["a"])(S,P,T,!1,null,null,null)),E=R.exports,O={name:"Shop",components:{Table:y,Tools:E},data:function(){return{totalPrice:0,broken:!1}},methods:{callSave:function(){this.$refs.calculatorRef.save()},calculateTotalPrice:function(e){this.totalPrice=e},totalPriceChanged:function(e){this.totalPrice=e,this.$refs.packingListTableRef_edit.calculatebase_prices(e)},changedBrokenState:function(e){this.broken=e},triggerSumTotalPrice:function(){this.$refs.packingListTableRef_edit.calculateTotalPrice()}}},C=O,x=Object(v["a"])(C,d,p,!1,null,null,null),A=x.exports,I={components:{editBody:A},props:{dialogVisible:{type:Boolean,default:!1}},data:function(){return{saving:!1}},computed:Object(o["a"])({},Object(i["e"])("orders",["currentDriver"])),methods:Object(o["a"])(Object(o["a"])({},Object(i["d"])("orders",["EDIT_DRIVER"])),{},{dialogOpened:function(){var e=this;this.newDriver=Object(o["a"])({},this.currentDriver),setTimeout((function(){e.$refs.editBodyRef.triggerSumTotalPrice()}),600)},cancel:function(){this.$emit("closeDialog")},save:function(){var e=this;this.saving=!0,setTimeout((function(){e.saving=!1,e.$refs.editBodyRef.callSave(),e.$emit("closeDialog")}),2e3)}})},j=I,N=(r("4c1f"),Object(v["a"])(j,s,u,!1,null,null,null)),F=N.exports,M={components:{edit:F},data:function(){return{search_input:"",search_type:1,addDialog:!1,editDialog:!1,delete_Dialog:!1}},computed:Object(o["a"])({},Object(i["e"])("orders",["currentOrder","currentOrderHeader","currentTable"])),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])("orders",["SET_QUERY","SET_CURRENT_TABLE","SET_CURRENT_ORDER_HEADER"])),Object(i["b"])("orders",["GET_ORDERS_COMMERTIA"])),{},{searchTypeChanged:function(e){this.SET_QUERY({key:"search_input",value:e})},backToInventar:function(){var e=this;this.GET_ORDERS_COMMERTIA().then((function(){e.SET_CURRENT_TABLE("orderInventar"),e.SET_CURRENT_ORDER_HEADER({customer:"",product:"",order_name:""})}))}})},U=M,B=(r("8989"),Object(v["a"])(U,c,l,!1,null,null,null)),H=B.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-col",{staticClass:"orders-page-body konversiya",attrs:{span:24}},[r("el-row",{staticStyle:{width:"100%"},attrs:{gutter:10}},[e._t("default"),r("el-col",{staticClass:"konversiya-main-tools",staticStyle:{height:"3.5rem"},attrs:{span:19}},[r("el-date-picker",{staticStyle:{"margin-right":"0.5em"},attrs:{type:"datetime",placeholder:"Dan","default-time":"12:00:00"},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}}),r("el-date-picker",{staticStyle:{"margin-right":"0.5em"},attrs:{type:"datetime",placeholder:"Gacha","default-time":"12:00:00"},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}}),r("el-button",{staticStyle:{border:"1px solid transparent"},attrs:{icon:"el-icon-search"}})],1),r("el-col",{staticStyle:{height:"calc(100% - 3.5rem)",border:"1px solid gray","border-radius":"10px"},attrs:{span:19}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.gettingInnerTable,expression:"gettingInnerTable"}],staticStyle:{width:"100%"},attrs:{height:"calc(100% - 3.5rem)",data:e.innertTableData,stripe:"","highlight-current-row":""},on:{"row-click":e.orderChosed}},[r("el-table-column",{attrs:{width:"50",type:"expand",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"inner-table"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.products,"show-header":!0,stripe:""}},[r("el-table-column",{attrs:{label:"КАФЕЛНИ КОДИ",prop:"code",fixed:"left",align:"center"}}),r("el-table-column",{attrs:{label:"СПЕЦИФИКАЦИЯСИ",prop:"type_name",align:"center"}}),r("el-table-column",{attrs:{label:"ТОВАРНИ РАЗМЕРИ",prop:"size",align:"center"}}),r("el-table-column",{attrs:{label:"ТОВАРНИ РАСМИ",prop:"photo",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:t.row.photo_path,fit:"scale-down"},on:{click:function(r){return e.openImg(t.row.photo_path)}}})]}}],null,!0)}),r("el-table-column",{attrs:{label:"1-ТА ПОЧКАДИГИ КОЛИЧЕСТВАНИ ЎЛЧОВ БИРЛИГИ",align:"center"}},[r("el-table-column",{attrs:{label:"ПОЧКАСИДИГИ (м2)",align:"center",prop:"area_of_one_packet"}}),r("el-table-column",{attrs:{label:"1-ДОНАСИНИ (м2)",prop:"area_of_an_item",align:"center"}}),r("el-table-column",{attrs:{align:"center",prop:"number_of_items",label:"УМУМИЙ ДОНАСИ"}}),r("el-table-column",{attrs:{label:"ПОЧКАСИДИГИ (КГ)",align:"center",prop:"wight_of_one_packet"}}),r("el-table-column",{attrs:{label:"1-ДОНАСИНИ  (КГ)",align:"center",prop:"weight_of_an_item"}})],1)],1)],1)]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"order_name",label:"Инвойс №"}}),r("el-table-column",{attrs:{width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(parseFloat(e.getTotalAre(t.row.products).packTotalArea.toFixed(4)))+" ")]}}])},[r("template",{slot:"header"},[r("span",[e._v("Умумий м"),r("sup",[e._v("2")])])])],2),r("el-table-column",{attrs:{width:"180",align:"center",label:"Умумий донаси"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{"show-header":!1,data:e.gridData(t.row.products)}},[r("el-table-column",{attrs:{align:"center",width:"120",property:"name",label:"name"}}),r("el-table-column",{attrs:{align:"center",width:"100",property:"value",label:"value"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isReturning||3===t.row.action?r("span",{staticStyle:{color:"red"}},[e._v(" - "+e._s(t.row.value))]):r("span",{staticStyle:{color:"green"}},[e._v(" + "+e._s(t.row.value))])]}}],null,!0)})],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(e.getTotalNumber(t.row.products).item_num))])],1)]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",label:"Почкаси / Донаси"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getPackNumber(t.row.products).pack_num)+" / "+e._s(e.getOverPackNumber(t.row.products).over_pack_num)+" ")]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"last_sum",label:"Кассаси"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{"show-header":!1,data:e.gridDataPrice(t.row.products)}},[r("el-table-column",{attrs:{align:"center",width:"120",property:"name",label:"name"}}),r("el-table-column",{attrs:{align:"center",width:"100",property:"value",label:"value"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isReturning||3===t.row.action?r("span",{staticStyle:{color:"red"}},[e._v(" "+e._s(parseFloat(t.row.value.toFixed(4))))]):r("span",{staticStyle:{color:"green"}},[e._v(" + "+e._s(parseFloat(t.row.value.toFixed(4))))])]}}],null,!0)})],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[r("span",{},[e._v("+ "+e._s(e.getPriceMinusPlus(t.row.products).plus))]),e._v(" / "),r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.getPriceMinusPlus(t.row.products).minus))])])],1)]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"driver",label:"Ҳайдовчи"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.driver.firstName+" "+t.row.driver.lastName)+" ")]}}])}),e.roles.includes("admin")?r("el-table-column",{attrs:{width:"180",align:"center",label:"Ходим"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.stuff.firstName+" "+t.row.user.stuff.lastName)+" ")]}}],null,!1,108317645)}):e._e(),r("el-table-column",{attrs:{width:"120",align:"center",label:"Касса"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.did_cassa?"Очиқ":"Ёпилган",placement:"left-start"}},[r("el-checkbox",{attrs:{value:t.row.did_cassa},on:{change:function(r){return e.doKassaForNow(t.row)}}})],1)]}}])}),r("el-table-column",{attrs:{prop:"action",width:"140",align:"center",label:e.currentOrderHeader.order_name?"Процесс":"Last action",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{style:{color:e.actions[t.row.action].color}},[e._v(e._s(e.actions[t.row.action].title))])]}}])})],1)],1)],2),r("el-dialog",{attrs:{title:"",visible:e.showImageDilog,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.showImageDilog=t}}},[r("el-image",{staticStyle:{width:"100%",height:"90%"},attrs:{src:e.imageUrl,fit:"scale-down"}})],1)],1)},$=[],z=r("1da1"),G=(r("96cf"),r("b775")),K=r("5c96"),V={name:"InnerTable",components:{},data:function(){return{fromDate:"",toDate:"",dateRangeValue:"",baseApi:"http://165.232.153.58:3001/",showImageDilog:!1,actuality:!1,imageUrl:"",actions:["",{title:"Сотув",color:"blue"},{title:"Сотув-2/Бартер",color:"green"},{title:"Возврат",color:"red"}],statuses:["el-icon-loading","el-icon-error","el-icon-success"],statuses_text:["Тасдиқлаш кутилмоқда","Заказ рад қилинди","Заказ қабул қилинди"],statuses_color:["gray","red","green"]}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["e"])("user",["roles"])),Object(i["e"])("commertia",["innertTableData","gettingInnerTable","currentOrderHeader","currentOrder"])),{},{partnersList:function(){var e=this;return this.partners.filter((function(t){return t.name.toLowerCase().includes(e.currentPartner.toLowerCase())}))}}),beforeDestroy:function(){this.SET_ORDER(null)},mounted:function(){var e=this;this.gettingPartners=!0,Object(G["a"])({method:"GET",url:"/info/get-shops-other"}).then((function(t){e.gettingPartners=!1,e.partners=t.data})).catch((function(t){console.error(t),e.gettingPartners=!1,e.partners=[]}))},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])("commertia",["SET_ORDER","SET_CURRENT_ORDER_HEADER","SET_CURRENT_TABLE"])),Object(i["b"])("commertia",["get_inner_table_data","GET_ORDERS_COMMERTIA","GET_CURRENT_ORDER_COMMERTIA","DO_KASSA_COMMERTIA"])),{},{doKassaForNow:function(e){var t=this;this.$confirm("Kassa qilishni tasdiqlang!","Kassa qilish").then(Object(z["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(G["a"])({url:"/orders/do-cassa-partner-orders",method:"PUT",data:{order_id:e._id,state:!e.did_cassa}});case 3:a=r.sent,n=a.data,Object(K["Message"])({message:n.message,type:"success",duration:2500}),t.get_inner_table_data({time:t.currentOrder.createdAt,_id:t.currentOrder.customer._id}).then((function(){t.SET_CURRENT_ORDER_HEADER(e),t.SET_CURRENT_TABLE("innerTable")})),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),Object(K["Message"])({message:r.t0.response.data,type:"error",duration:2500});case 12:case"end":return r.stop()}}),r,null,[[0,9]])}))))},getCurrentPartnerOrders:function(e,t,r){console.log(e),this.getPartnerProducts(e._id)},getPartnerProducts:function(e){var t=this;return Object(z["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(G["a"])({method:"GET",url:"/orders/get-partner-orders",params:{partner_id:e}}).catch((function(e){throw e}));case 3:a=r.sent,n=a.data,t.orders=n,console.log("dafafasfasfasf",t.orders),r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),t.orders=[],console.error(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},openImg:function(e){this.showImageDilog=!0,this.imageUrl=e},orderChosed:function(e){-1===e.status?this.SET_ORDER(e):this.$notify({message:"You cant edit this order: order already processed by zavsklad",type:"warning",duration:4e3})},getTotalAre:function(e){return e.reduce((function(e,t){return{packTotalArea:e.packTotalArea+t.packTotalArea}}))},getTotalNumber:function(e){return e.reduce((function(e,t){return{item_num:e.item_num+t.item_num}}))},getPackNumber:function(e){return e.reduce((function(e,t){return{pack_num:e.pack_num+t.pack_num}}))},getOverPackNumber:function(e){return e.reduce((function(e,t){return{over_pack_num:e.over_pack_num+t.over_pack_num}}))},gridData:function(e){var t={name:"",value:"",isReturning:!1},r=[];return e.forEach((function(e){t.name=e.type_name+(e.is_broken?" - broken":""),t.value=e.item_num,t.isReturning=e.isReturning,r.push(t),t={name:"",value:"",isReturning:!1}})),r},getPriceMinusPlus:function(e){var t=0,r=0;return e.forEach((function(e){e.isReturning?t+=e.sum:r+=e.sum})),t=parseFloat(t.toFixed(4)),r=parseFloat(r.toFixed(4)),{minus:t,plus:r}},gridDataPrice:function(e){var t={name:"",value:"",isReturning:!1},r=[];return e.forEach((function(e){t.name=e.type_name+(e.is_broken?" - broken":""),t.value=e.sum,t.isReturning=e.isReturning,r.push(t),t={name:"",value:"",isReturning:!1}})),r}})},q=V,Y=(r("0de6"),Object(v["a"])(q,L,$,!1,null,null,null)),Q=Y.exports,W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-col",{staticClass:"orders-page-body konversiya",attrs:{span:24}},[r("el-row",{staticStyle:{width:"100%"},attrs:{gutter:10}},[e._t("default"),r("el-col",{staticClass:"konversiya-main-tools",staticStyle:{height:"3.5rem"},attrs:{span:19}},[r("el-date-picker",{staticStyle:{"margin-right":"0.5em"},attrs:{type:"datetime",placeholder:"Dan","default-time":"12:00:00"},model:{value:e.fromDate,callback:function(t){e.fromDate=t},expression:"fromDate"}}),r("el-date-picker",{staticStyle:{"margin-right":"0.5em"},attrs:{type:"datetime",placeholder:"Gacha","default-time":"12:00:00"},model:{value:e.toDate,callback:function(t){e.toDate=t},expression:"toDate"}}),r("el-button",{staticStyle:{border:"1px solid transparent"},attrs:{icon:"el-icon-search"}})],1),r("el-col",{staticStyle:{height:"calc(100% - 3.5rem)",border:"1px solid gray","border-radius":"10px"},attrs:{span:19}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.gettingOuterTable||e.gettingInnerTable,expression:"gettingOuterTable || gettingInnerTable"}],staticStyle:{width:"100%"},attrs:{height:"calc(100% - 3.5rem)",data:e.outerTableData,stripe:"","highlight-current-row":""},on:{"row-dblclick":e.rowChosen,"row-click":e.orderChosed}},[r("el-table-column",{attrs:{type:"expand",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"inner-table"},[r("el-table",{staticStyle:{width:"80%"},attrs:{data:t.row.products,"show-header":!0,stripe:""}},[r("el-table-column",{attrs:{label:"КАФЕЛНИ КОДИ",prop:"code",fixed:"left",align:"center"}}),r("el-table-column",{attrs:{label:"СПЕЦИФИКАЦИЯСИ",prop:"type_name",align:"center"}}),r("el-table-column",{attrs:{label:"ТОВАРНИ РАЗМЕРИ",prop:"size",align:"center"}}),r("el-table-column",{attrs:{label:"ТОВАРНИ РАСМИ",prop:"photo",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.photo_path,fit:"scale-down"},on:{click:function(r){return e.openImg(t.row.photo_path)}}})]}}],null,!0)}),r("el-table-column",{attrs:{label:"1-ТА ПОЧКАДИГИ КОЛИЧЕСТВАНИ ЎЛЧОВ БИРЛИГИ",align:"center"}},[r("el-table-column",{attrs:{label:"ПОЧКАСИДИГИ (м2)",align:"center",prop:"area_of_one_packet"}}),r("el-table-column",{attrs:{label:"1-ДОНАСИНИ (м2)",prop:"area_of_an_item",align:"center"}}),r("el-table-column",{attrs:{align:"center",prop:"number_of_items",label:"УМУМИЙ ДОНАСИ"}}),r("el-table-column",{attrs:{label:"ПОЧКАСИДИГИ (КГ)",align:"center",prop:"wight_of_one_packet"}}),r("el-table-column",{attrs:{label:"1-ДОНАСИНИ  (КГ)",align:"center",prop:"weight_of_an_item"}})],1)],1)],1)]}}])}),r("el-table-column",{attrs:{width:"160",align:"center",prop:"order_name",label:"Инвойс №"}}),r("el-table-column",{attrs:{width:"170",align:"center",prop:"product",label:"Махсулот"}}),r("el-table-column",{attrs:{width:"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{"show-header":!1,data:e.gridDataArea(t.row.products)}},[r("el-table-column",{attrs:{align:"center",width:"120",property:"name",label:"name"}}),r("el-table-column",{attrs:{align:"center",width:"100",property:"value",label:"value"}})],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(" "+e._s(parseFloat(e.getTotalAre(t.row.products).packTotalArea.toFixed(4)))+" ")])],1)]}}])},[r("template",{slot:"header"},[r("span",[e._v("Умумий м"),r("sup",[e._v("2")])])])],2),r("el-table-column",{attrs:{width:"170",align:"center",label:"Умумий донаси"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{"show-header":!1,data:e.gridData(t.row.products)}},[r("el-table-column",{attrs:{align:"center",width:"120",property:"name",label:"name"}}),r("el-table-column",{attrs:{align:"center",width:"100",property:"value",label:"value"}})],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(e.getTotalNumber(t.row.products).item_num))])],1)]}}])}),r("el-table-column",{attrs:{width:"170",align:"center",label:"Почкаси / Донаси"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.getPackNumber(t.row.products).pack_num)+" / "+e._s(e.getOverPackNumber(t.row.products).over_pack_num)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",prop:"last_sum",label:"Кассаси"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",trigger:"hover"}},[r("el-table",{attrs:{"show-header":!1,data:e.gridDataPrice(t.row.products)}},[r("el-table-column",{attrs:{align:"center",width:"120",property:"name",label:"name"}}),r("el-table-column",{attrs:{align:"center",width:"100",property:"value",label:"value"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(" "+e._s(parseFloat(t.row.value.toFixed(4))))])]}}],null,!0)})],1),r("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(" "+e._s(parseFloat(t.row.last_sum.toFixed(4)))+" ")])],1)]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"customer",label:"Диллер"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(""+t.row.customer.name)+" ")]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",prop:"driver",label:"Ҳайдовчи"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.driver.firstName+" "+t.row.driver.lastName)+" ")]}}])}),e.roles.includes("admin")?r("el-table-column",{attrs:{width:"180",align:"center",label:"Ходим"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.stuff.firstName+" "+t.row.user.stuff.lastName)+" ")]}}],null,!1,108317645)}):e._e(),r("el-table-column",{attrs:{width:"120",align:"center",label:"Касса"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.did_kassa?"Очиқ":"Ёпилган",placement:"left-start"}},[e.row.did_kassa?r("i",{staticClass:"el-icon-minus",staticStyle:{color:"red"}}):r("i",{staticClass:"el-icon-check",staticStyle:{color:"green"}})])]}}])}),r("el-table-column",{attrs:{width:"180",align:"center",label:"Вақти",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(t.row.createdAt).toLocaleString("uz-UZ"))+" ")]}}])})],1)],1)],2),r("el-dialog",{attrs:{title:"",visible:e.showImageDilog,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.showImageDilog=t}}},[r("el-image",{staticStyle:{width:"100%",height:"90%"},attrs:{src:e.imageUrl,fit:"scale-down"}})],1)],1)},J=[],X={name:"OrderInventar",components:{},data:function(){return{fromDate:"",toDate:"",dateRangeValue:"",baseApi:"http://165.232.153.58:3001/",showImageDilog:!1,actuality:!1,imageUrl:"",statuses:["el-icon-loading","el-icon-error","el-icon-success"],statuses_text:["Waiting approvement","Order ejected","Order accepted"],statuses_color:["gray","red","green"]}},computed:Object(o["a"])(Object(o["a"])({},Object(i["e"])("user",["roles"])),Object(i["e"])("commertia",["outerTableData","gettingOuterTable","currentOrderHeader","gettingInnerTable"])),mounted:function(){},beforeDestroy:function(){this.SET_ORDER(null)},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])("commertia",["SET_ORDER","SET_CURRENT_ORDER_HEADER","SET_CURRENT_TABLE"])),Object(i["b"])("commertia",["get_inner_table_data","GET_ORDERS_COMMERTIA","GET_CURRENT_ORDER_COMMERTIA","DO_KASSA_COMMERTIA"])),{},{rowChosen:function(e){var t=this;this.SET_ORDER(e),this.get_inner_table_data({time:e.createdAt,_id:e.customer._id}).then((function(){t.SET_CURRENT_ORDER_HEADER(e),t.SET_CURRENT_TABLE("innerTable")}))},gridDataPrice:function(e){var t={name:"",value:"",isReturning:!1},r=[];return e.forEach((function(e){t.name=e.type_name+(e.is_broken?" - broken":""),t.value=e.sum,t.isReturning=e.isReturning,r.push(t),t={name:"",value:"",isReturning:!1}})),r},gridDataArea:function(e){var t={name:"",value:"",isReturning:!1},r=[];return e.forEach((function(e){t.name=e.type_name+(e.is_broken?" - broken":""),t.value=e.packTotalArea,t.isReturning=e.isReturning,r.push(t),t={name:"",value:"",isReturning:!1}})),r},openImg:function(e){this.showImageDilog=!0,this.imageUrl=e},orderChosed:function(e){this.SET_ORDER(e)},getTotalAre:function(e){return e.reduce((function(e,t){return{packTotalArea:e.packTotalArea+t.packTotalArea}}))},getTotalNumber:function(e){return e.reduce((function(e,t){return{item_num:e.item_num+t.item_num}}))},getPackNumber:function(e){return e.reduce((function(e,t){return{pack_num:e.pack_num+t.pack_num}}))},getOverPackNumber:function(e){return e.reduce((function(e,t){return{over_pack_num:e.over_pack_num+t.over_pack_num}}))},gridData:function(e){var t={name:"",value:""},r=[];return e.forEach((function(e){t.name=e.type_name+(e.is_broken?" - broken":""),t.value=e.item_num,r.push(t),t={name:"",value:""}})),r},doKassaForNow:function(e){var t=this;this.$confirm("Ушбу савдони қилишни тасдиқланг","Касса қилиш").then((function(){t.DO_KASSA_COMMERTIA({order_id:e._id,consumer:e.customer._id,product_id:e.product_id}).then((function(){t.GET_ORDERS_COMMERTIA()})).catch((function(e){console.error(e)}))}))}})},Z=X,ee=(r("e87c"),Object(v["a"])(Z,W,J,!1,null,null,null)),te=ee.exports,re={name:"OrdersList",components:{Tools:H,orderInventar:te,innerTable:Q},data:function(){return{orders:[],key:Math.random(),currentPartner:""}},computed:Object(o["a"])(Object(o["a"])({},Object(i["e"])("commertia",["partners","currentTable","gettingPartners"])),{},{partnersList:function(){var e=this;return this.partners.filter((function(t){return t.name.toLowerCase().includes(e.currentPartner.toLowerCase())}))}}),beforeDestroy:function(){this.SET_CURRENT_TABLE("orderInventar"),this.SET_CURRENT_ORDER_HEADER({customer:"",product:"",order_name:""})},mounted:function(){this.get_partners()},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])("commertia",["SET_CURRENT_TABLE","SET_CURRENT_ORDER_HEADER"])),Object(i["b"])("commertia",["get_partners","get_outer_table_data"])),{},{currentPartnerChanged:function(e){this.partnersList(e)},getCurrentPartnerOrders:function(e){this.SET_CURRENT_TABLE("orderInventar"),this.get_outer_table_data({id:e._id})}})},ae=re,ne=(r("3693"),Object(v["a"])(ae,a,n,!1,null,null,null));t["default"]=ne.exports},6981:function(e,t,r){},"7db0":function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").find,o=r("44d2"),i=r("ae40"),c="find",l=!0,s=i(c);c in[]&&Array(1)[c]((function(){l=!1})),a({target:"Array",proto:!0,forced:l||!s},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(c)},"7e67":function(e,t,r){"use strict";r("5ec9")},8989:function(e,t,r){"use strict";r("a9ad")},9113:function(e,t,r){},a9ad:function(e,t,r){},b521:function(e,t,r){"use strict";r("e8ea")},b65f:function(e,t,r){var a=r("23e7"),n=Math.ceil,o=Math.floor;a({target:"Math",stat:!0},{trunc:function(e){return(e>0?o:n)(e)}})},cfaf:function(e,t,r){},e87c:function(e,t,r){"use strict";r("9113")},e8ea:function(e,t,r){},f071:function(e,t,r){}}]);