(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6854de83"],{"236b":function(e,t,n){},2553:function(e,t,n){},"31b0":function(e,t,n){},"333d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];n("a9e3");Math.easeInOutQuad=function(e,t,n,a){return e/=a/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function l(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,n){var a=i(),r=e-a,s=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=s;var i=Math.easeInOutQuad(u,a,r,t);l(i),u<t?o(e):n&&"function"===typeof n&&n()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},c=u,p=(n("f8bf"),n("2877")),d=Object(p["a"])(c,a,r,!1,null,"76f1a239",null);t["a"]=d.exports},7538:function(e,t,n){"use strict";n("e142")},"7db0":function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").find,o=n("44d2"),l=n("ae40"),i="find",s=!0,u=l(i);i in[]&&Array(1)[i]((function(){s=!1})),a({target:"Array",proto:!0,forced:s||!u},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o(i)},"9d4e":function(e,t,n){"use strict";n("31b0")},c413:function(e,t,n){"use strict";n("236b")},e142:function(e,t,n){},ea6e:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticClass:"inventars-body",attrs:{gutter:10}},[n("Tools",{on:{setMapOfProductType:e.setProductMap}}),n("page-body",{ref:"pBodyInvSamples"})],1)],1)},r=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-col",{staticClass:"inventars-page-tools",attrs:{span:24}},[n("div",{staticStyle:{display:"flex"}},[n("el-select",{staticStyle:{"margin-right":"1em"},attrs:{placeholder:"Диллер/Дўконни киритинг",clearable:""},on:{change:e.shopChanged},model:{value:e.current_shop,callback:function(t){e.current_shop=t},expression:"current_shop"}},e._l(e.shops,(function(e){return n("el-option",{key:e._id,attrs:{value:e._id,label:e.name}})})),1),n("el-input",{staticStyle:{border:"1px solid transparent",width:"20rem"},attrs:{clearable:"",placeholder:"Қидириш"},on:{input:e.searchTypeChanged},model:{value:e.search_input,callback:function(t){e.search_input=t},expression:"search_input"}},[n("el-select",{style:{width:"6rem"},attrs:{slot:"prepend",placeholder:"Select"},on:{change:e.searchTypeChanged},slot:"prepend",model:{value:e.search_type,callback:function(t){e.search_type=t},expression:"search_type"}},[n("el-option",{attrs:{label:"Номи",value:"name"}}),n("el-option",{attrs:{label:"Размер",value:"size"}})],1)],1),n("el-select",{staticStyle:{width:"17rem",margin:"0 1em"},attrs:{placeholder:"Return status"},on:{change:e.returnStatusChanged},model:{value:e.return_status,callback:function(t){e.return_status=t},expression:"return_status"}},[n("el-option",{attrs:{value:0,label:"Ҳаммаси"}}),n("el-option",{attrs:{value:1,label:"Қайтарилган"}}),n("el-option",{attrs:{value:2,label:"Қайтарилмаган"}})],1),n("el-button",{staticStyle:{border:"1px solid transparent","margin-left":".5rem"},attrs:{icon:"el-icon-search"},on:{click:function(t){return e.search()}}})],1),n("div",{staticStyle:{display:"flex"}},[n("el-button",{staticStyle:{border:"1px solid transparent"},attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.$router.push("/sklad/storetproduct")}}})],1)])},l=[],i=n("5530"),s=(n("b0c0"),n("2f62")),u=n("b775"),c={data:function(){return{search_input:"",search_type:"name",addDialog:!1,editDialog:!1,delete_Dialog:!1,return_status:2,current_shop:"",shops:[]}},computed:Object(i["a"])({},Object(s["e"])("inventars",["currentOrder"])),mounted:function(){var e=this;"size"in this.$route.query?(this.search_type="size",this.search_input=this.$route.query.size,this.searchTypeChanged()):"name"in this.$route.query&&(this.search_type="name",this.search_input=this.$route.query.name,this.searchTypeChanged()),Object(u["a"])({url:"/info/get-shops-list",method:"GET"}).then((function(t){e.shops=t.data})).catch((function(e){console.error(e)}))},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["d"])("samples",["SET_QUERY"])),Object(s["b"])("samples",["GET_SAMPLES"])),{},{returnStatusChanged:function(e){this.SET_QUERY({key:"return_status",value:e})},shopChanged:function(e){this.SET_QUERY({key:"shop",value:e})},search:function(){var e=this;this.GET_SAMPLES().then((function(){e.$emit("setMapOfProductType")})),this.SET_QUERY({key:"currentPage",value:1})},searchTypeChanged:function(e){this.SET_QUERY({key:"search_input",value:this.search_type}),this.SET_QUERY({key:"search_text",value:this.search_input})}})},p=c,d=(n("c413"),n("2877")),h=Object(d["a"])(p,o,l,!1,null,null,null),m=h.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-col",{staticClass:"inventars-page-body",attrs:{span:24}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],key:e.resetKey,staticStyle:{width:"100%"},attrs:{height:"calc(100% - 3.5rem)",data:e.samplesTable,"row-class-name":e.className}},[n("el-table-column",{attrs:{width:"50",type:"expand",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"inner-table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.products,"show-header":!0,stripe:""}},[n("el-table-column",{attrs:{label:"Кафелни коди",prop:"code","min-width":150,fixed:"left",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.productTypeMap[t.row._id]?e.productTypeMap[t.row._id].code:t.$index)+" "+e._s(t.row.broken?"синган":"")+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"Спецификацияси",prop:"type_name","min-width":180,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.productTypeMap[t.row._id]?e.productTypeMap[t.row._id].type_name:""+t.row.product_type)+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"Товарни размери",prop:"size","min-width":180,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.productTypeMap[t.row._id]?e.productTypeMap[t.row._id].size:"")+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"Товарни расми",prop:"photo","min-width":160,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:e.productTypeMap[t.row._id]?e.productTypeMap[t.row._id].photo_path:"",fit:"scale-down"},on:{click:function(n){return e.openImg(e.productTypeMap[t.row._id]?e.productTypeMap[t.row._id].photo_path:"")}}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"Касса нархи",prop:"total_area","min-width":160,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toThousandFilter(t.row.base_price))+" "),t.row.price_by?n("span",[e._v("(дона)")]):n("span",[e._v("(м"),n("sup",[e._v("2")]),e._v(")")])]}}],null,!0)}),n("el-table-column",{attrs:{label:"Умумий суммаси ($)","min-width":160,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toThousandFilter((t.row.price_by?t.row.item_num:t.row.packTotalArea)*t.row.base_price))+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"Умумий юзаси",prop:"total_area","min-width":160,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toThousandFilter(t.row.packTotalArea))+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"Умумий сони","min-width":160,prop:"total_number_of_items",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toThousandFilter(t.row.item_num))+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"Умумий пакет / ортиқча сони",prop:"total_number_of_packets",align:"center","min-width":160},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toThousandFilter(t.row.pack_num))+" / "+e._s(t.row.over_pack_num)+" ")]}}],null,!0)},[n("template",{slot:"header"},[n("span",[e._v("Умумий "),n("br"),e._v("пакет / ортиқча "),n("br"),e._v(" сони")])])],2),n("el-table-column",{attrs:{label:"УМУМИЙ ОҒИРЛИГИ","min-width":160,prop:"total_wight_of_packets",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toThousandFilter(t.row.weight_of_an_item*t.row.item_num))+" ")]}}],null,!0)},[n("template",{slot:"header"},[n("span",[e._v("Умумий "),n("br"),e._v(" оғирлиги")])])],2),n("el-table-column",{attrs:{label:"1-та почкадаги каличество ўлчов бирлиги",align:"center"}},[n("el-table-column",{attrs:{label:"Почкасини (м2)",align:"center","min-width":160,prop:"area_of_one_packet"}}),n("el-table-column",{attrs:{label:"1-донасини (м2)","min-width":160,prop:"area_of_an_item",align:"center"}}),n("el-table-column",{attrs:{align:"center",prop:"number_of_items","min-width":160,label:"Умумий донаси"}}),n("el-table-column",{attrs:{label:"Почкасини (КГ)",align:"center","min-width":160,prop:"wight_of_one_packet"}}),n("el-table-column",{attrs:{label:"1-донасини  (КГ)",align:"center","min-width":160,prop:"weight_of_an_item"}})],1)],1)],1)]}}])}),n("el-table-column",{attrs:{prop:"shop",align:"center",label:"Диллер/Дўкон","min-width":180},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.shop?n("div",[e._v(" "+e._s(t.row.shop.name)+" ")]):n("div",[e._v(" "+e._s(t.row.other_shop.name)+" ")])]}}])}),n("el-table-column",{attrs:{prop:"product",align:"center",label:"Махсулот","min-width":180}}),n("el-table-column",{attrs:{prop:"totalArea",align:"center",label:"","min-width":180},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.totalArea?t.row.totalArea.toFixed(2):"")+" ")]}}])},[n("template",{slot:"header"},[e._v(" Умумий м"),n("sup",[e._v("2")])])],2),n("el-table-column",{attrs:{label:"Умумий суммаси",prop:"total_area","min-width":160,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.toThousandFilter(t.row.last_sum))+" ")]}}])}),n("el-table-column",{attrs:{prop:"totalNumber",align:"center",label:"Умумий донаси","min-width":180},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.totalNumber)+" ")]}}])}),n("el-table-column",{attrs:{prop:"partiya",align:"center",label:"Партия","min-width":180}}),n("el-table-column",{attrs:{prop:"isReturned",align:"center",label:"Қайтарилди","min-width":180},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{disabled:t.row.isReturned,value:t.row.isReturned},on:{change:function(n){return e.doReturnSample(t.row._id,t.row)}}})]}}])}),n("el-table-column",{attrs:{prop:"createdAt",align:"center",label:"Берилган вақти","min-width":180},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.giveDate(t.row.createdAt))+" ")]}}])}),n("el-table-column",{attrs:{prop:"updatedAt",align:"center",label:"Қайтарилган вақти","min-width":180},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.isReturned?e.giveDate(t.row.updatedAt):"-")+" ")]}}])})],1),n("div",{staticClass:"pgntion"},[n("Pagination",{attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1),n("el-dialog",{attrs:{title:"",visible:e.showImageDilog,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.showImageDilog=t}}},[n("el-image",{staticStyle:{width:"100%",height:"90%"},attrs:{src:e.imageUrl,fit:"scale-down"}})],1)],1)},_=[],b=(n("99af"),n("d3b7"),n("159b"),n("7db0"),n("b680"),n("333d")),g=n("8975"),y={components:{Pagination:b["a"]},data:function(){return{baseApi:"http://165.232.153.58:3001/",showImageDilog:!1,imageUrl:"",productTypeMap:[],resetKey:101,listQuery:{page:1,limit:20}}},computed:Object(i["a"])({},Object(s["e"])("samples",["samplesTable","tableLoading","total","queryParams"])),beforeDestroy:function(){},mounted:function(){var e=this;this.listQuery={page:this.queryParams.currentPage,limit:this.queryParams.perPage},this.GET_SAMPLES().then((function(){e.mapProductTypes()}))},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({giveDate:function(e){return e=new Date(e),e.toLocaleDateString()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},Object(s["d"])("samples",["SET_QUERY"])),Object(s["b"])("samples",["GET_SAMPLES","DO_RETURN"])),{},{doReturnSample:function(e,t){var n=this;this.$confirm("Сиз ".concat(t.shop.name,"-га берилган ").concat(t.product," махсулот образецини қайтармоқчимисиз?"),"Образецни қайтариш").then((function(){n.DO_RETURN(e).then((function(){n.GET_SAMPLES()})).catch((function(e){return console.error(e)}))})).catch((function(){}))},openImg:function(e){this.showImageDilog=!0,this.imageUrl=e},className:function(e){var t=e.row;return t.isReturned?"":"warning-row"},mapProductTypes:function(){var e=this;this.samplesTable.forEach((function(t){var n=t.products,a=t.product_id.product_types;n.forEach((function(t){var n=a.find((function(e){return e.code===t.code}));e.productTypeMap[t._id]=Object(i["a"])(Object(i["a"])({},t),n)}))}))},toThousandFilter:function(e){return e?Object(g["toThousandFilter"])(parseFloat(e.toFixed(3))):0},getList:function(){var e=this;this.SET_QUERY_PARAM({key:"perPage",value:this.listQuery.limit}),this.SET_QUERY_PARAM({key:"currentPage",value:this.listQuery.page}),this.GET_SAMPLES().then((function(){e.mapProductTypes()}))}})},w=y,v=(n("7538"),Object(d["a"])(w,f,_,!1,null,null,null)),S=v.exports,T={name:"Inventars",components:{Tools:m,pageBody:S},methods:{setProductMap:function(){this.$refs.pBodyInvSamples.mapProductTypes()}}},k=T,E=(n("9d4e"),Object(d["a"])(k,a,r,!1,null,null,null));t["default"]=E.exports},f8bf:function(e,t,n){"use strict";n("2553")}}]);